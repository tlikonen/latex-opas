% Tekijä:   Teemu Likonen <tlikonen@iki.fi>
% Lisenssi: Creative Commons Nimeä-JaaSamoin 4.0 Kansainvälinen (CC BY-SA 4.0)
%           https://creativecommons.org/licenses/by-sa/4.0/legalcode.fi

\chapter{Dokumentin asetukset}

% Tämä luku käsittelee...

\section{Dokumenttiluokat}
\label{luku:dokumenttiluokat}

Latexin lähdedokumenttien alussa on aina samankaltainen rivi, joka
määrittelee käytettävän dokumenttiluokan ja mahdollisesti dokumentin
pe\-rus\-ase\-tuk\-sia. Dokumenttiluokka määritellään komennolla
\koodi{\keno documentclass} ja sen argumentiksi annetaan
dokumenttiluokan nimi. Valinnaisilla argumenteilla vaikutetaan
asetuksiin.

\begin{koodilohkosis}
  \documentclass[a4paper, 12pt]{article}
\end{koodilohkosis}

Dokumenttiluokka on eräänlainen pohjadokumentti eli ominaisuuksien ja
asetusten kokoelma, jonka varaan oma dokumentti kirjoitetaan. Eri
dokumenttiluokat sisältävät erilaisia ominaisuuksia ja erilaiset
oletusasetukset. Edellä olevassa esimerkissä käytettiin
\koodi{article}\-/luokkaa, joka on yleiskäyttöinen luokka
monenlaisten dokumenttien kirjoittamiseen.

Seuraavissa alaluvuissa käsitellään tavallisimpia dokumenttiluokkia ja
niiden asetuksia. Dokumenttiluokkia voi tehdä itsekin, ja sitä aihetta
käsitellään luvussa \ref{luku:omat_dokumenttiluokat}.

\subsection{Perusdokumenttiluokat}

Muutama dokumenttiluokka kuuluu Latexin perusvalikoimaan, eli ne ovat
aina saatavilla ja asennettuna, kun itse Latexkin on. Niitä kutsutaan
välillä standardeiksi dokumenttiluokiksi, ja ne ovat ikään kuin
muuttumattomia perusluokkia, joiden varaan on turvallista rakentaa omia
dokumentteja tai muita dokumenttiluokkia. Muita dokumenttiluokkia
kehitetään Latexin perusosien ulkopuolella, ja niiden ominaisuudet
voivat muuttua ja kehittyä nopeammin ajan myötä.

Normaalit%
\koodimargin{article \\ report \\ book} paperisivuihin perustuvat
dokumentit tehdään luokkien \koodi{article}, \koodi{report} tai
\koodi{book} avulla. Ne ovat keskenään hyvin samanlaisia, mutta
niiden oletusasetukset poikkeavat toisistaan. Karkeasti jaoteltuna
\koodi{article}\-/luokka on tarkoitettu lyhyehköille artikkeleille ja
yleiseksi perustaksi monenlaisille dokumenteille. Sen sijaan
\koodi{report} ja \koodi{book} on tarkoitettu laajoihin
dokumentteihin, ja niissä on kirja\-typo\-grafian piirteitä.

Suurin edellä mainittujen perusluokkien ero on otsikoinnissa ja
dokumentin jäsentämisessä: \koodi{report} ja \koodi{book}
sisältävät suuret pääluvut (\koodi{\keno chapter}) eli otsikot, jotka
alkavat tyhjältä sivulta; \koodi{article} ei sisällä samanlaisia
päälukuja vaan ainoastaan tavalliset leipätekstin mukana kulkevat
väliotsikot (\koodi{\keno section}, \koodi{\keno subsection}
jne.). Otsikointia ja tekstin jäsentämistä käsitellään tarkemmin luvussa
\ref{luku:otsikot}.

Toinen ero perusluokkien välillä on se, että vain \koodi{book}\-/luokka
sisältää komennot \koodi{\keno frontmatter}, \koodi{\keno mainmatter} ja
\koodi{\keno backmatter}, joita voi käyttää ilmaisemaan tietokirjan
erityyppiset osat: alkusivut, varsinaiset sisältösivut ja liitesivut.
Näitä käsitellään luvussa \ref{luku:frontmainbackmatter}. Lisäksi
\koodi{report}\-/luokka sisältää ympäristön \koodi{ab\-stract}, joka on
tarkoitettu tekstin tiivis\-telmä\-osan tekemiseen;
\koodi{book}\-/luokassa sitä ei ole.

Muut erot koskevat lähinnä oletusasetuksia, mutta asetukset ovat
tietenkin muutettavissa, eivätkä ne siten ole määräävä tekijä
valittaessa luokkien \koodi{article}, \koodi{report} ja
\koodi{book} välillä. Dokumenttiluokkien asetuksia käsitellään
seuraavassa alaluvussa.

Muita%
\koodimargin{letter} perusdokumenttiluokkia ovat \koodi{let\-ter} ja
\koodi{slides}. Nimensä mukaisesti \koodi{let\-ter} on kirjeiden
kirjoittamista varten. Se sisältää kirjeen tyypilliseen rakenteeseen
liittyviä komentoja ja soveltuu varsinkin tarpeisiin, joissa täytyy
automaattisesti tuottaa samanmuotoisia kirjeitä usealle
vas\-taan\-otta\-jalle. Sama Latex\-/dokumentti voi sisältää useita
kirjeitä, ja sivunumerointi ja alaviitteiden numerointi alkaa joka
kirjeessä alusta -- kuten on tietysti toivottavaa.
\koodi{letter}\-/luokkaa käsitellään tarkemmin luvussa
\ref{luku:kirjeet}.

Piirtoheittimien%
\koodimargin{slides} läpinäkyvien kalvojen ja sen kaltaisten
dokumenttien tekemiseen on dokumenttiluokka \koodi{slides}.
Piirtoheittimet ovat jääneet menneisyyteen, ja nykyään jokseenkin
vastaavanlainen rooli on esi\-tys\-gra\-fiikka\-ohjel\-milla, joilla
tehdään dia\-esi\-tyk\-siä esimerkiksi esitelmien havaintomateriaaliksi.
\koodi{slides}\-/luokkaa ei varmaan tarvita enää mihinkään, mutta
esi\-tys\-gra\-fiik\-kaan on olemassa erittäin monipuolinen luokka
\koodi{beamer}, jonka perus\-asioita käsitellään luvussa
\ref{luku:diaesitykset}.

\subsection{Perusdokumenttiluokkien asetukset}

Taulukkoon \ref{tlk:luokkavalitsimet}%
\koodimargin{*paper} on koottu perusdokumenttiluokkien valitsimet.
Paperikoko asetetaan valitsimilla \koodi{a4\-paper} (210 × 297 mm),
\koodi{a5\-paper} (148 × 210 mm), \koodi{b5\-paper} (176 × 250 mm),
\koodi{execu\-tive\-paper} (7,25 × 10,5 tuumaa), \koodi{legal\-paper}
(8,5 × 14 tuumaa) tai \koodi{letter\-paper} (8,5 × 11 tuumaa). Latexin
oletuksena on \koodi{letterpaper}, mutta oletusta voi olla muutettu
Latexin jakelupaketissa. Varminta on aina itse kirjoittaa haluttu
paperikoko dokumentin asetuksiin.

\leijutlk{
  \ttfamily
  \begin{tabular}{llll}
    \toprule
    a4paper & landscape & openright & 10pt \\
    a5paper & final & openany & 11pt \\
    b5paper & draft & onecolumn & 12pt \\
    executivepaper & oneside & twocolumn & titlepage \\
    legalpaper & twoside & fleqn & notitlepage \\
    letterpaper & openbib & leqno & clock \\
    \bottomrule
  \end{tabular}
}{
  \caption{Perusdokumenttiluokkien valitsimet}
  \label{tlk:luokkavalitsimet}
}

Paperi%
\koodimargin{landscape} on oletuksena pysty\-asen\-nossa, mutta valitsin
\koodi{landscape} asettaa sen vaaka\-/asentoon. Tämä asetus koskee
dokumentin kaikkia sivuja, mutta jos haluaa asettaa vain yksittäisiä
sivuja vaaka\-/asentoon, täytyy käyttää
\paketti{pdf\-lscape}\-/pakettia\avctan{pdflscape} ja sen tarjoamaa
ympäristöä.

Paperikokoja ja muitakin sivun mittoja voi määritellä monipuolisemmin
\paketti{geometry}\-/paketin toimintojen avulla (luku
\ref{luku:sivuasetukset}). Jos sitä pakettia käyttää, ei näitä
dokumenttiluokan paperi\-koko\-ase\-tuk\-sia tarvita välttämättä
lainkaan.

Leipätekstin%
\koodimargin{10pt \\ 11pt \\ 12pt} fontin koon voi määrittää
valitsimilla \koodi{10pt}, \koodi{11pt} ja \koodi{12pt}, joista ensin
mainittu on oletus. Lyhenne pt tarkoittaa typografista pistemittaa,
joita käsitellään luvussa \ref{luku:mitat}. Nämä asetukset vaikuttavat
myös sivun marginaaleihin, koska fontin koko vaikuttaa tekstiriville
mahtuvien merkkien määrään ja Latex pyrkii pitämään rivit sopivan
mittaisina lukemisen kannalta.

Vain kolme eri fonttikokoa leipätekstille on kovin vähän ja peräisin
ajalta, jolloin Latexin fontit olivat pik\-seli\-gra\-fiik\-kaa eli
muodostuivat erillisistä kuvapisteistä. Nyky\-aika\-na fontit ovat
vek\-tori\-gra\-fiik\-kaa eli matemaattisten kaavojen avulla
muodostettavia kuvia, ja ne voi venyttää mihin kokoon tahansa. Sen
vuoksi nämä dokumenttiluokkien fonttikokovalitsimet eivät ole kovin
tarpeellisia eivätkä kaikkiin tarpeisiin riittäviä nykyaikana. Voi niitä
silti käyttää, jos niiden avulla saa halutun lopputuloksen. Fontteja
käsitellään tarkemmin luvussa \ref{luku:kirjaintyypit}.

Dokumentista%
\koodimargin{draft} voi latoa luonnosversion käyttämällä
dokumenttiluokan valitsinta \koodi{draft}. Luonnokseen merkitään ainakin
tekstipalstan yli pursuavat rivit mustalla suorakulmiolla, mikä voi
auttaa tekstikappaleiden ulkoasun korjailussa (luku \ref{luku:kappale}).
Eri makropaketit voivat hyödyntää \koodi{draft}\-/valitsinta omalla
tavallaan eli muuttaa toimintaansa sen perusteella. Esimerkiksi
grafiikkaan liittyvä paketti \paketti{graph\-icx} (luku
\ref{luku:grafiikka}) jättää luonnosversiosta kuvat pois, ja niiden
paikalla on vain suorakulmio. Pdf\-/tiedoston ristiviitteistä huolehtiva
\paketti{hyperref}\-/paketti jättää pdf:n sisäiset ristiviitteet ja
sisällysluettelon tekemättä (luku \ref{luku:ristiviitteet}).

Lopullinen%
\koodimargin{final} ladontatila on \koodi{final}, joka tarkoittaa, että
dokumenttiin ladotaan kaikki sisältö ja ominaisuudet niin kuin se on
tarkoitettu julkaistavaksi. Tätä valitsinta ei tarvitse käyttää, koska
se on oletustila.

Sivujen%
\koodimargin{oneside \\ twoside} yksipuolisuus (\koodi{one\-side}) ja
kaksipuolisuus (\koodi{two\-side}) ovat asetuksia, jotka vaikuttavat
sivun marginaalien asetuksiin ja mahdollisesti uuden pääluvun
(\koodi{\keno chapter}) aloitukseen. Oletus on yksipuolinen dokumentti
kaikissa muissa perusdokumenttiluokissa paitsi \koodi{book}\-/luokassa,
jonka oletus on kaksipuolinen.

Yksipuolisessa dokumentissa kaikkien sivujen marginaalit ovat
lähtökohtaisesti samanlaisia ja asetuksissa puhutaan esimerkiksi
vasemmasta (\englanti{left}) ja oikeasta (\englanti{right})
marginaalista. Kaksipuolisessa dokumentissa sivut ajatellaan pareittain:
kaksi sivua muodostaa kirjan aukeaman, jonka vasemmalla puolella on
parillinen sivunumero ja oikealla pariton. Marginaalien asetuksissa
puhutaan sisämarginaaleista (\englanti{inner}) ja ulkomarginaaleista
(\englanti{outer}). Sisämarginaalit ovat oletuksena pienemmät, koska
niitä on aukeamalla aina kaksi vierekkäin. Ulkomarginaaleissa on tilaa
marginaalihuomautuksille (luku \ref{luku:marginaalihuomautukset}).
Marginaaleja ja muita sivun asetuksia käsitellään tarkemmin luvussa
\ref{luku:sivuasetukset}.

Jos%
\koodimargin{openright \\ openany} dokumentti on määritetty
kaksipuoliseksi (\koodi{two\-side}), voidaan
\koodi{open\-right}\-/valitsimella määrittää pääluvut (\koodi{\keno
  chapter}) alkamaan aina oikeanpuoleiselta sivulta. Se onkin oletus
dokumenttiluokassa \koodi{book}. Valitsin \koodi{open\-any} asettaa
pääluvut alkamaan miltä tahansa seuraavalta sivulta.

Valitsin%
\koodimargin{openbib} \koodi{open\-bib} liittyy automaattiseen
lähdeluettelon muotoiluun. Jos tämä valitsin on mukana, automaattisessa
lähdeluettelon muotoilussa lisätään rivinvaihtoja lähdemerkinnän eri
osien kuten teoksen tekijöiden ja teoksen nimen jälkeen. Lähdemerkintöjä
ja lähdeluettelon laatimista käsitellään luvussa \ref{luku:lähteet}.

Matemaattisten%
\koodimargin{fleqn \\ leqno} kaavojen ladontaan liittyvässä
\koodi{equa\-tion}\-/ympäristössä kaavat ladotaan normaalisti
vaakasuunnassa sivun keskelle. Dokumenttiluokan valitsinta \koodi{fleqn}
käyttämällä kaavat ladotaan kuitenkin sivun vasempaan reunaan. Kaavojen
numerot sijoitetaan oletuksena sivun oikeaan reunaan, mutta valitsimella
\koodi{leqno} ne saa ladottua sivun vasempaan reunaan. Matematiikkatilaa
käsitellään luvussa \ref{luku:matematiikka}.

Kansilehden%
\koodimargin{titlepage \\ notitlepage} tai dokumentin perustietojen
esitystapaan vaikutetaan valitsimilla \koodi{title\-page} ja
\koodi{no\-title\-page}. Latexissa on yksinkertaiset komennot dokumentin
perustietojen eli pääotsikon, tekijöiden nimien ja päiväyksen latomiseen
(luku \ref{luku:kansilehti}), ja näillä valitsimilla vaikutetaan siihen,
ladotaanko perustiedot omalle sivulleen (\koodi{title\-page}) vaiko
varsinaisen sisältösivun alkuun (\koodi{no\-title\-page}).
Oletus\-asetus vaihtelee eri dokumenttiluokissa.

Oletuksena%
\koodimargin{onecolumn \\ twocolumn} sivun tekstit ladotaan yhdelle
palstalle (\koodi{one\-column}), mutta valitsimella \koodi{two\-column}
teksti ladotaan kahdelle palstalle. Nämä valitsimet vaikuttavat myös
sivun marginaaleihin. Latexin perusosat eivät hallitse useampaa kuin
kaksi palstaa, mutta \paketti{multicol}\-/makropaketin avulla saa
enemmänkin. Palstoja käsitellään luvussa \ref{luku:palstat}.

Dokumenttiluokassa%
\koodimargin{clock} \koodi{slides} toimii \koodi{clock}\-/valitsin, joka
latoo kellon\-ajan piirtoheitinkalvon loppuun \koodi{\keno
  note}\-/komennon yhteydessä. Tämä valitsin kuulunee samaan paikkaan
kuin piirtoheittimet ja \koodi{slides}\-/luokkakin: kierrätykseen.

\subsection{Muita dokumenttiluokkia}

Kuka tahansa voi tehdä ja julkaista omia dokumenttiluokkia, ja niinpä
perusdokumenttiluokkien lisäksi onkin saatavilla monenlaisia luokkia.
Tässä käsitellään vain joitakin.

Luokka \koodi{memoir} on Latexin \koodi{book}\-/luokkaan perustuva,
ominaisuuksiltaan laajennettu luokka, joka sopii yleiskäyttöön. Tähän
luokkaan on sisällytetty monia dokumentin rakenteeseen ja ulkoasuun
liittyviä toimintoja, joihin yleensä tarvitaan erillisiä makropaketteja
tai muuten lisäkoodia. Sen sijaan, että ratkoisi dokumentin rakenteen ja
asettelun kysymyksiä erillisten makropakettien avulla, saattaisi olla
helpompaa lukea (lähes) pelkästään vain \koodi{memoir}\-/luokan
ohjekirjaa ja toteuttaa asiat yhtenäisen järjestelmän avulla.

\koodi{beamer}\-/luokka on monipuolinen ja huippuunsa viritetty luokka
esi\-tys\-gra\-fii\-kan eli dia\-esi\-tys\-ten tekemiseen. Vastaava
mutta hieman helppokäyttöisempi luokka on \koodi{pow\-er\-dot}. Nämä
luokat ovat eräänlaisia Latexin vastineita esimerkiksi
\englanti{Libreoffice Impress}\-/{} ja \englanti{Microsoft Powerpoint}
\=/ohjelmille.

Pienempiin, rajattuihin erityistarpeisiin on olemassa useita luokkia.
Esimerkiksi yksisivuisten taitettavien lehtisten kuten tapahtuman
käsi\-ohjel\-mien tekemiseen soveltuu \koodi{leaf\-let}\-/luokka.
\textsc{cd}\-/levyjen kansia voi tehdä \koodi{cd}\-/luokan avulla.
Kuvitettuja seinäkalentereita vartenkin on tehty oma luokkansa,
\koodi{wall\-cal\-en\-dar}. Kitaran tablatuureja eli otelautakuvaan
perustuvia nuotteja voi tehdä \koodi{gui\-tar\-tabs}\-/luokan avulla.

Kaikenlaista on siis olemassa. Saatavilla oleviin dokumenttiluokkiin voi
tutustua esimerkiksi \englanti{Comprehensive Tex Archive Network}
(\textsc{ctan}) \=/verkkosivun avulla.%
\footnote{\url{https://ctan.org/topic/class}}

\section{Sivu}
\label{luku:sivuasetukset}

...

\subsection{Marginaalit ja mitat}

...

\subsection{Ylä- ja alatunnisteet}

...

\section{Fontit}
\label{luku:kirjaintyypit}

Fontit ja niiden asettaminen on Latexissa melko monimutkainen
kokonaisuus, koska fonteilla on paljon ominaisuuksia ja niihin
vaikutetaan monilla eri asetuksilla ja abstraktiotasoilla. Aika monta
asiaa pitää ymmärtää, jotta voi tehokkaasti työskennellä Latexin
fonttien kanssa.

Fontti jo itsessään on moniselitteinen käsite, joka vaatii typografiassa
usein täsmentäviä ilmauksia. Sana \emph{fontti} voi tarkoittaa
kokonaista kirjainperhettä eli yhteensopivien kirjainleikkausten
muodostamaa kokonaisuutta. Samaan kirjainperheeseen kuuluu yleensä
ainakin neljä eri leikkausta: tavallinen, \textit{kursiivi},
\textbf{lihavoitu} ja \textbf{\textit{lihavoitu kursiivi}}. Joihinkin
perheisiin kuuluu leikkauksia paljon enemmänkin, kuten useita eri
vahvuuksia. Joissakin puheissa sana \emph{fontti} tarkoittaa vain yhtä
kirjainleikkausta, ja silloin koko perheeseen viitataan ehkä sanalla
fonttiperhe.

Tässä oppaassa käytetään \emph{fontti}\-/sanaa yleisnimityksenä Latexin
kirjaintyyppeihin liittyville asetuksille. Se tarkoittaa kirjainperhettä
tai siihen kuuluvaa yksittäistä leikkausta sekä asetuksia, jotka
liittyvät niihin. Silloin kun merkitystä pitää täsmentää, käytetään
suomenkielisiä nimiä kirjainperhe ja kirjainleikkaus. Sen sijaan sana
\emph{kirjasin} on jätetty kokonaan pois. Se tarkoittaa vanhassa
metalliladonnassa ja mekaanisissa kirjoituskoneissa metallisen
ladontakappaleen eli kirjakkeen päähän valettua kirjaimen tai muun
merkin kohokuviota, joka painaa mustejäljen paperille.

Kuten Latexissa yleensäkin myös fonttien kanssa kannattaa käyttää
korkean abstraktiotason komentoja, jotka piilottavat yksityiskohdat ja
teknisen toteutuksen. Latexin fonttitoiminnot on suunniteltu juuri
siihen: matalan tason font\-ti\-ase\-tuk\-set määritellään mieluiten
vain kerran dokumentin esittelyosassa, ja sen jälkeen käytetään
pelkästään korkean tason komentoja.

Latexin fonttitekniikka rakentuu eri\-/ikäisistä kerroksista ja
tekniikoista. Fontteja on aikoinaan tehty
\englanti{Metafont}\-/nimisellä\avctan{metafont} kielellä, jolla
kuvataan merkkien muodot. \englanti{Metafont} on myös tietokoneohjelma,
joka tuottaa kuvauskielen perusteella bittikarttafontteja eli
pikseleistä koostuvia fontteja. On käytetty myös kehittyneempää
\englanti{Metapost}\-/kuvauskieltä\avctan{metapost} ja \=/ohjelmaa,
joilla on tuotettu vek\-tori\-gra\-fiik\-ka\-font\-te\-ja \textsc{eps}-
eli \englanti{Encapsulated Post Script} \=/muodossa ja muutettu niitä
edelleen \englanti{Post Script Type~1} \=/fonteiksi. Myöhemmin mukaan
ovat tulleet nyky\-aikai\-set \englanti{True Type}- ja \englanti{Open
  Type} \=/fontit, ja niihin tämä opas keskittyy.

\subsection{Fontin valinta}
\label{luku:fontin_valinta}

Latexin fonttien perus\-toiminnot rakentuvat kolmen erityyppisen
kirjainperheen varaan:

\begin{nluetelma}

\item peruskirjainperhe eli dokumentin pääasiallinen kirjainperhe, joka
  on kirja\-typo\-gra\-fias\-sa usein antiikva eli pääteviivallinen
  (\englanti{serif, roman})%
  \footnote{Antiikva (lat. \emph{antiquus} 'vanha') perustuu antiikin
    Roomassa käytettyihin kirjainmuotoihin. Ne olivat pääteviivallisia,
    mutta pääteviivat sinänsä eivät ole ainoa antiikvan piirre. Toinen
    tärkeä ominaisuus ovat erivahvuiset kirjainten viivat.}

\item groteski eli pääteviivaton (\englanti{sans serif, gothic})%
  \footnote{Groteskiin (ransk. \emph{grotesque} 'kummallinen') kuuluu
    pääteviivojen puuttumisen lisäksi lähes tasavahvuiset kirjainten
    viivat. Tämän oppaan groteskifontissa on kuitenkin selvästi
    antiikvamaiset kaksivahvuiset viivat, joten se on eräänlainen
    antiikvan ja groteskin välimuoto.}

\item tasalevyinen kirjoituskoneen kaltainen perhe
  (\englanti{type\-writer, mono\-spaced, tele\-type}).

\end{nluetelma}

Kuvassa \ref{kuva:kirjainperhetyypit} ovat tässä oppaassa käytetyt kolme
eri kirjainperhettä. Leipätekstissä käytetään antiikvaa, otsikoissa ja
kuvateksteissä groteskia ja koodi\-esi\-mer\-keis\-sä tasalevyistä.
Kirjoituskoneen kaltainen tasalevyinen kirjainperhe on tässä tapauksessa
tyypiltään antiikva eli pääteviivallinen, mutta se voisi olla muutakin.
Tasalevyisyys on sen kirjainperheen tärkein määrittävä tekijä Latexin
asetusten näkökulmasta.

\leijukuva{
  {\rmfamily\addfontfeatures{ScaleAgain=5}Amf}
  \hfill
  {\sffamily\addfontfeatures{Scale=5}Amf}
  \hfill
  {\ttfamily\addfontfeatures{FakeStretch=1, Scale=4.5}Amf}
}{
  \caption{Vasemmalla pääteviivallinen, keskellä pääteviivaton ja
    oikealla tasalevyinen pääteviivallinen kirjainperhe}
  \label{kuva:kirjainperhetyypit}
}

Joidenkin fonttien käyttöönottoon on tehty oma makropakettinsa, joten
sellaiset fontit voi ladata dokumentin esittelyosassa komennolla
\koodi{\keno usepackage}. Fonttikohtaisia makropaketteja on olemassa
varsinkin vanhalle fonttitekniikalle (\englanti{Metafont, Post Script
  Type~1}) mutta myös matematiikkatilan (luku \ref{luku:matematiikka})
fonttiasetuksille ja joillekin kir\-jain\-perhe\-koko\-nai\-suuk\-sille.

Valmiita makropaketteja on kuitenkin vain harvoille fonteille, ja
käytännössä lähes aina \englanti{True Type}- ja \englanti{Open Type}
\=/muodossa olevat kirjainperheet otetaan käyttöön
\paketti{fontspec}\-/paketin komennoilla alla olevan esimerkin
mukaisesti.

\begin{koodilohkosis}
  \setmainfont{TeX Gyre Termes}[Scale=1]
  \setsansfont{TeX Gyre Heros} [Scale=MatchLowercase]
  \setmonofont{TeX Gyre Cursor}[Scale=MatchLowercase]
\end{koodilohkosis}

Edellisessä esimerkissä \englanti{TeX Gyre Termes, Heros} ja
\englanti{Cursor} ovat kirjainperheiden nimiä. Fonttitiedostojen
tulee olla asennettuna käyttöjärjestelmän normaalien käytäntöjen
mukaisesti tai Latex\-/jakelun käytäntöjen mukaisesti.

Kirjainperheiden käyttöönoton yhteydessä voi määritellä lukuisia
asetuksia kuten ligatuureja, gemenanumeroita, optisia kokoja ja muita
fontin ominaisuuksia. Edellisessä esimerkissä käytetään vain
\koodi{Scale}\-/valitsinta, jolla fontin voi skaalata haluttuun kokoon.

Peruskirjainperheen (\koodi{\keno set\-main\-font}) skaalaukseksi
asetetaan \koodi{Scale=1}, eli sille ei tehdä mitään, ja koko valitsimen
voisi jättää pois. Sen sijaan kahdella muulla kirjainperheellä
(\koodi{\keno set\-sans\-font}, \koodi{\keno set\-mono\-font}) käytetään
ker\-roin\-ase\-tus\-ta \koodi{MatchLowercase}, joka skaalaa fontin
siten, että gemenakirjaimet eli pienet kirjaimet ovat yhtä korkeita kuin
peruskirjainperheessä. Mikäli skaa\-laus\-ase\-tus
\koodi{MatchLowercase} ei tuota ihan toivottua tulosta, voi
kirjainperheen skaalausta hienosäätää vielä
\koodi{Scale\-Again}\-/valitsimella seuraavaan tapaan:

\begin{koodilohkosis}
  \setmonofont{TeX Gyre Cursor}
  [Scale=MatchLowercase, ScaleAgain=.97]
\end{koodilohkosis}

Kirjainperheen määrittelyn yhteydessä ei yleensä tarvitse antaa kuin
kirjainperheen nimi, sillä \paketti{fontspec}\-/paketti ja kääntäjät
osaavat automaattisesti ladata perheeseen sisältyviä eri
fonttitiedostoja kuten pysty\-asen\-toi\-sen leikkauksen, kursiivin ja
lihavoinnin. On kuitenkin mahdollista määritellä kirjainperheeseen
kuuluvia leikkausten nimiä tai fonttitiedostoja erikseen. Tällainen on
tarpeen esimerkiksi silloin, kun kirjainperhe sisältää useita eri
vahvuuksia ja halutaan itse määritellä, mikä niistä tulee
perusvahvuudeksi ja mikä lihavoiduksi.

Esimerkki \ref{esim:fontit_leik_omin} selventää, kuinka kirjainperheen
eri leikkausten nimet tai fonttitiedostot määritellään. Kullekin
leikkaukselle voi määrittää myös omat asetuksensa
\koodi{Fea\-tures}\-/loppuisella valitsimella. Samaa asiaa
havainnollistetaan myös konkreettisemmin esimerkissä
\ref{esim:fontit_leik_omin_kayt}. Leikkauksen nimessä voi käyttää tähteä
(\koodi{*}), joka korvautuu kirjainperheen nimellä (\englanti{Macklin
  Text}).

\begin{esimerkki*}
\begin{koodilohko}
  \setmainfont{…}[
    UprightFont={…},     UprightFeatures={…},
    ItalicFont={…},      ItalicFeatures={…},
    BoldFont={…},        BoldFeatures={…},
    BoldItalicFont={…},  BoldItalicFeatures={…},
    SlantedFont={…},     SlantedFeatures={…},
    BoldSlantedFont={…}, BoldSlantedFeatures={…},
    SmallCapsFont={…},   SmallCapsFeatures={…}]
\end{koodilohko}
\caption{Kirjainperheeseen sisältyvien leikkausten nimien ja
  kirjainleikkauskohtaisten ominaisuuksien määrittely}
\label{esim:fontit_leik_omin}
\end{esimerkki*}

\begin{esimerkki*}
\begin{koodilohko}
  \setmainfont{Macklin Text}[
    UprightFont    = {* Light},
    ItalicFont     = {* Light Italic},
    BoldFont       = {* Medium},
    BoldItalicFont = {* Medium Italic}]
\end{koodilohko}
\caption{Eri leikkausten nimien määrittely \englanti{Macklin Text}
  \=/kirjainperheelle. Leikkauksen nimessä tähti (\koodi{*}) viittaa
  koko perheen nimeen}
\label{esim:fontit_leik_omin_kayt}
\end{esimerkki*}

Jos edellä kuvatut kolme kirjainperhettä (\koodi{\keno set\-main\-font},
\koodi{\keno set\-sans\-font} ja \koodi{\keno set\-mono\-font}) eivät
riitä, on \paketti{fontspec}\-/paketissa komennot lisäperheiden ja
\=/leikkausten määrittämiseen. Uusi perhe määritellään seu\-raa\-vasti:

\begin{koodilohkosis}
  \newfontfamily{\hienoperhe}{TeX Gyre Schola}[…]
\end{koodilohkosis}

Komento \koodi{\keno new\-font\-family} toimii samalla tavalla kuin
aiemmin esitellyt \koodi{\keno set\-main\-font} ym. komennot, mutta
lisäksi ensimmäisellä argumentilla nimetään komento, jolla kirjainperhe
otetaan käyttöön. Edellisessä esimerkissä luodaan komento \koodi{\keno
  hieno\-perhe}, joka kytkee päälle \englanti{TeX Gyre Schola}
\=/nimisen kirjainperheen.

Jos ei tarvita kokonaista perhettä vaan yksi leikkaus riittää, käytetään
komentoa \koodi{\keno new\-font\-face}. Seuraavassa esimerkissä
määriteltävä komento \koodi{\keno hieno\-leikkaus} ottaa käyttöön
lihavoidun (bold) kirjainleikkauksen perheestä \englanti{TeX Gyre
  Schola}.

\begin{koodilohkosis}
  \newfontface{\hienoleikkaus}{TeX Gyre Schola Bold}[…]
\end{koodilohkosis}

\subsection{Fontin koko ja rivikorkeus}

Fonttien koot on tapana valita ja ilmaista typografisen pistemitan
avulla. Esimerkiksi 10--12 pistettä on tyypillinen leipätekstin
oletuskoko teks\-tin\-kä\-sit\-tely\-ohjel\-mis\-sa. Piste on
typografiassa mitta\-yksikkö, jonka pituus on määritelty eri tavoin eri
aikoina ja eri kulttuureissa.

Myös Latexissa fonttien koot voi määritellä pistemittojen avulla. Niitä
ja muitakin Latexin mit\-ta\-yk\-si\-köi\-tä käsitellään tarkemmin
luvussa \ref{luku:mitat}. Fonteissa ole\-tus\-mitta\-yk\-sik\-kö\-nä on
vanha pica\-/järjestelmän piste, jonka pituus on noin 0,3515
millimetriä. Sen lyhenne Latexissa on~\emph{pt}. Tämän oppaan
esimerkeissä käytetään kuitenkin Post Script \=/standardin mukaista,
julkaisuohjelmiin vakiintunutta uudempaa pica\-/pistettä, joka on hieman
edellistä pidempi: noin 0,3528 millimetriä. Latexissa sen lyhenne
on~\emph{bp}. Ero näiden kahden pistemitan välillä on hyvin pieni,
tavallisilla fonttiko'oilla käytännössä merkityksetön.

Kirjainleikkauksen koko mitataan merkistön ylimmän ja alimman kohdan
välillä, esimerkiksi k\=/kirjaimen ylimmän pisteen ja y\=/kirjaimen
alimman pisteen välillä. Lisäksi mittaan luetaan mukaan merkistön ylä-
ja alapuolella oleva pieni tyhjä tila, jonka fontin suunnittelija on
määritellyt.

Matalalla tasolla fonttien kokoon vaikuttaa Latexissa eräs yllättävä
asia. Nimittäin dokumenttiluokalle (luku \ref{luku:dokumenttiluokat})
voi antaa valitsimen, jolla koko asetetaan. Vaihtoehtoja on Latexin
normaaleissa dokumenttiluokissa vain kolme: \koodi{10pt} (oletus),
\koodi{11pt} ja \koodi{12pt}. Dokumenttiluokan koko\-asetus vaikuttaa
myös sivun marginaaleihin, koska Latex pyrkii pitämään rivin
merkkimäärän lukijalle sopivana: yhdelle riville ei kannata latoa ihan
mahdottomasti merkkejä, koska rivin seuraaminen vaatii enemmän
keskittymistä.

Fontin koon määrittäminen dokumenttiluokan valitsimella ehkä kuuluu jo
vähän menneisyyteen, mutta voi sitä edelleen käyttää, jos se riittää ja
sillä saa halutun lopputuloksen. Yleensä lienee järkevää jättää
dokumenttiluokan fonttiasetus oletukseksi (\koodi{10pt}) ja käyttää koon
asettamiseen luvuissa \ref{luku:fontti_suhteellinen} ja
\ref{luku:fontti_absoluuttinen} kerrottuja tapoja. Sivun marginaalien ja
muiden mittojen määrittämiseen on ohjeita luvussa
\ref{luku:sivuasetukset}.

Fonttiasetuksiin kuuluu fontin koon lisäksi toinenkin mitta: rivikorkeus
(\koodi{\keno base\-line\-skip}). Se on peräkkäisten rivien
peruslinjojen välinen etäisyys. Fontin koko ja rivikorkeus määritellään
saman\-aikaisesti, koska ne ovat saman \koodi{\keno fontsize}\-/komennon
argumentteja. Esimerkki:

\begin{koodilohkosis}
  \fontsize{10bp}{12bp} \selectfont
\end{koodilohkosis}

Ensimmäinen argumentti on fontin kokomitta ja toinen on rivikorkeus.
Mitta\-yksiköt voivat olla mitä tahansa Latexin mittoja, ja oletuksena
käytetään pt\-/pistemittaa, jos yksikköä ei ole mainittu. Komento
\koodi{\keno select\-font} on mukana, koska vasta sen myötä matalan
tason fonttikomennot tulevat voimaan. Korkean tason fonttikomennot (luku
\ref{luku:fontit_korkea}) suorittavat sen automaattisesti.

Rivikorkeus on vähintään sama kuin fontin koko, mutta yleensä se
asetetaan pari pistettä suuremmaksi, jotta rivit eivät olisi liian
lähellä toisiaan. Esimerkissä \ref{esim:rivikorkeus} on kaksi erilaista
\koodi{\keno fontsize}\-/komentoa ja ladottu lopputulos.

\begin{esimerkki*}
\begin{koodilohko}
  \fontsize{8bp}{11bp}\selectfont Tässä on pienehkö leipätekstin
  fonttikoko ja suhteellisen suuri rivikorkeus. Pitkät rivit vaativat
  suuremman rivikorkeuden kuin lyhyet rivit.

  \fontsize{16bp}{17bp}\selectfont Tässä on melko suuri fontti ja
  suhteellisen pieni rivikorkeus. Suuri fontti ja lyhyet rivit eivät
  tarvitse kovin suurta rivikorkeutta.
\end{koodilohko}
\parbox{\linewidth}{%
  \linespread{1}\erikoisfontti
  \fontsize{8bp}{11bp}\selectfont Tässä on pienehkö leipätekstin
  fonttikoko ja suhteellisen suuri rivikorkeus. Pitkät rivit vaativat
  suuremman rivikorkeuden kuin lyhyet rivit.

  \fontsize{16bp}{17bp}\selectfont Tässä on melko suuri fontti ja
  suhteellisen pieni rivikorkeus. Suuri fontti ja lyhyet rivit eivät
  tarvitse kovin suurta rivikorkeutta. }

\vspace{1ex}
\hrulefill
\vspace{2ex}

\caption{Fontin koon ja rivikorkeuden asettaminen ja vaikutus}
\label{esim:rivikorkeus}
\end{esimerkki*}

Toinen tekstirivien peruslinjojen väliseen etäisyyteen vaikuttava asetus
on \koodi{\keno baselinestretch}. Se on desimaalilukukerroin, jolla
nykyinen rivikorkeus kerrotaan. Kerroin asetetaan helpoimmin komennolla
\koodi{\keno linespread}.\footnote{Toinen tapa: \koodi{\keno
    renewcommand\{\keno baselinestretch\}\{kerroin\}}}

\begin{koodilohkosis}
  \fontsize{10bp}{12bp} \linespread{1.3} \selectfont
\end{koodilohkosis}

Edellä oleva esimerkki asettaa fontin kooksi 10 pistettä ja
rivikorkeudeksi 12 pistettä. \koodi{\keno linespread}\-/komennolla
asetetun kertoimen vuoksi rivien peruslinjojen väliseksi etäisyydeksi
tulee lopulta 1,3 kertaa 12 pistettä eli 15,6 pistettä. Ei ole väliä,
kummassa järjestyksessä \koodi{\keno fontsize}- ja \koodi{\keno
  linespread}\-/komennot annetaan. Asetukset tulevat voimaan vasta
\koodi{\keno select\-font}\-/komennon jälkeen.

Käytännössä \koodi{\keno linespread} sopii rivikorkeuden yleistason
hienosäätöön esimerkiksi dokumentin esittelyosassa. Tilannekohtainen
rivikorkeus on parasta asettaa \koodi{\keno fontsize}\-/komennolla.

\subsection{Korkean tason komennot}
\label{luku:fontit_korkea}

Latexissa on joukko korkean tason fonttikomentoja, jotka on tarkoitettu
käytettäväksi sen jälkeen, kun matalan tason asetukset on kerran
määritetty. Taulukossa \ref{tlk:fonttimallikomennot} on komennot
kirjainperheen ja kirjainleikkauksen valintaan. Joka rivillä ensin
mainittu komento (esim. \koodi{\keno rm\-fam\-i\-ly}) vaikuttaa
tekstiin, joka tulee komennon jälkeen. Vaikutus\-alue rajoittuu nykyisen
ympäristön (luku \ref{luku:ymparistot}) sisään tai aaltosulkeilla (luku
\ref{luku:aaltosulkeet}) rajatun alueen sisään. Rivillä toisena olevalle
komennolle (esim. \koodi{\keno text\-rm\{\ldots\}}) annetaan yksi
argumentti, ja komennon vaikutus koskee vain argumenttina olevaa
tekstiä.

\providecommand{\rivi}{}
\renewcommand{\rivi}[4]{%
  \koodi{\keno #1} & \koodi{\keno #2\{\ldots\}} & #3 & #4 \\}

\leijutlk{
  \begin{tabular}{llll}
    \toprule
    \multicolumn{2}{l}{\ots{Komento}}
    & \multicolumn{2}{l}{\ots{Merkitys}} \\

    \midrule
    \rivi {rmfamily} {textrm} {\rmfamily perhe}
    {perus, yl. antiikva, serif, roman}
    \rivi {sffamily} {textsf} {\sffamily perhe}
    {groteski, sans serif, gothic}
    \rivi {ttfamily} {texttt} {\ttfamily perhe}
    {tasalevyinen, typewriter}

    \midrule
    \rivi {mdseries} {textmd} {\mdseries leikkaus}
    {tavallinen vahvuus, medium}
    \rivi {bfseries} {textbf} {\bfseries leikkaus}
    {lihavoitu, bold}

    \midrule
    \rivi {upshape} {textup} {\upshape leikkaus}
    {pystyasento, tavallinen}
    \rivi {itshape} {textit} {\itshape leikkaus}
    {kursiivi, italic}
    \rivi {slshape} {textsl} {\slshape leikkaus}
    {kalteva, slanted, oblique}
    \rivi {scshape} {textsc} {\scshape leikkaus}
    {pienversaali, kapiteeli, small caps}
    \bottomrule
  \end{tabular}
}{
  \caption{Komennot kirjainperheen ja kirjainleikkauksen valintaan.
    Perustila on \koodi{\keno rm\-family}, \koodi{\keno md\-series} ja
    \koodi{\keno up\-shape}}
  \label{tlk:fonttimallikomennot}
}

Taulukossa on ensimmäisillä riveillä kirjainperhekomennot (3\,kpl),
jotka vaihtavat koko perheen kaikkine leikkauksineen. Niiden jälkeen
tulevat kirjainleikkauskomennot, jotka valitsevat toisen leikkauksen
samasta perheestä. Kirjainleikkauksen asetukset jaetaan kahteen ryhmään:
\englanti{\emph{series}} 'sarja' ja \englanti{\emph{shape}} 'muoto'.
Kummastakin ryhmästä on valittuna aina yksi ominaisuus, eli
samanaikaisesti voi olla voimassa esimerkiksi \koodi{\keno bf\-se\-ries}
(\textbf{lihavoitu}) ja \koodi{\keno it\-shape} (\textit{kursiivi}), ja
tuloksena on \textbf{\itshape lihavoitua kursiivia}.

Useimmissa fonteissa kursiivileikkaus (\koodi{\keno it\-shape}) ja
kalteva leikkaus (\koodi{\keno sl\-shape}) tuottavat saman
lopputuloksen, mutta käsitteellisesti ne ovat eri asia. Kursiivi on aina
muodoltaan erilainen leikkaus, joka hieman mukailee
käsi\-ala\-kir\-joi\-tusta, joskaan kirjaimia ei ole sidottu toisiinsa.
Sen sijaan kalteva leikkaus on tavallisen eli pys\-ty\-asen\-toi\-sen
leikkauksen kallistettu versio. Kallistus voi olla kirjainmuotoilijan
piirtämä leikkaus, tai kallistus on voitu toteuttaa mekaanisesti.
Kallistuksen voi tehdä myös Latexissa (luku \ref{luku:fontit_muut}).

Komennot fontin koon valintaan ovat taulukossa
\ref{tlk:fonttikokokomennot}. Taulukko kertoo myös, mitä fontin
pistekokoa (pt) mikäkin komento tarkoittaa oletuksena. Oletus riippuu
Latexin dokumenttiluokkien (luku \ref{luku:dokumenttiluokat})
fonttikokovalitsimista \koodi{10pt}, \koodi{11pt} ja \koodi{12pt}.

\leijutlk{
  \begin{tabular}{lr@{}lr@{}lr@{}l}
    \toprule
    \ots{Komento}
    & \multicolumn{2}{c}{\ots{10pt}}
    & \multicolumn{2}{c}{\ots{11pt}}
    & \multicolumn{2}{c}{\ots{12pt}} \\
    \midrule
    \koodi{\keno tiny} & 5 && 6 && 6 \\
    \koodi{\keno scriptsize} & 7 && 8 && 8 \\
    \koodi{\keno footnotesize} & 8 && 9 && 10 \\
    \koodi{\keno small} & 9 && 10 && 10&,95 \\
    \koodi{\keno normalsize} & 10 && 10&,95 & 12 \\
    \koodi{\keno large} & 12 && 12 && 14&,4 \\
    \koodi{\keno Large} & 14&,4 & 14&,4 & 17&,28 \\
    \koodi{\keno LARGE} & 17&,28 & 17&,28 & 20&,74 \\
    \koodi{\keno huge} & 20&,74 & 20&,74 & 24&,88 \\
    \koodi{\keno Huge} & 24&,88 & 24&,88 & 24&,88 \\
    \bottomrule
  \end{tabular}
}{
  \caption{Fonttien oletuspistekoot dokumenttiluokkien valitsimilla
    \koodi{10pt}, \koodi{11pt} ja \koodi{12pt}}
  \label{tlk:fonttikokokomennot}
}

% \pagebreak[3]

Kaikille korkean tason fonttikomennoille on olemassa myös samanniminen
ympäristönsä. Seuraavassa esimerkissä on kaksi fontteihin vaikuttavaa
ympäristöä sisäkkäin.

% \pagebreak[3]

\begin{koodilohkosis}
  \begin{footnotesize}
    \begin{scshape}
      Tämä teksti on pientä pienversaalia.
    \end{scshape}
  \end{footnotesize}
\end{koodilohkosis}

\begin{tulossis}
  \begin{footnotesize}
    \begin{scshape}
      Tämä teksti on pientä pienversaalia.
    \end{scshape}
  \end{footnotesize}
\end{tulossis}

% \pagebreak[3]

\subsection{Koot suhteellisesti}
\label{luku:fontti_suhteellinen}

Dokumentin fonttien koot on helpointa määrittää siten, että asettaa
ensin peruskirjainperheen koon ja antaa muiden fonttien määräytyä
suhteessa siihen. Esimerkki \ref{esim:fontti_suhteellinen} selventää,
kuinka se tapahtuu. Alussa otetaan käyttöön dokumenttiluokka
\koodi{article} ja annetaan sille valitsin \koodi{10pt}, joka määrittää
fonttikooksi 10 pistettä. Se on dokumenttiluokan ole\-tus\-ase\-tus,
jota ei tarvitsisi edes kirjoittaa näkyviin. Esimerkin toisella rivillä
otetaan \paketti{fontspec}\-/paketti käyttöön.

Peruskirjainperheen (rivi~4) koko skaalataan 1,4\-/kertaiseksi, eli
pistekooksi tulee 1,4 kertaa 10 pistettä eli 14 pistettä (pt).
Normaalikokoinen peruskirjainperhe on ainoa, jonka pistekoko tiedetään.
Kaikkien muiden koot täytyisi selvittää laskemalla.

Groteski eli pääteviivaton kirjainperhe (rivi~5) ja tasalevyinen perhe
(rivi~6) skaalataan samankorkuiseksi kuin perusperhe. Vertailukohtana
ovat gemenat eli pienaakkoset (\koodi{MatchLowercase}). Näiden kahden
kirjainperheen pistekokoa ei tiedetä. Se ei välttämättä ole sama kuin
perusfontissa, koska fonttien pistekoko mitataan ylimmän ja alimman
kohdan välillä ja koska fonttien mittasuhteet ovat erilaisia.

\begin{esimerkki*}
\begin{koodilohko}
  \documentclass[10pt]{article} % 10pt on oletus
  \usepackage{fontspec}

  \setmainfont{TeX Gyre Termes}[Scale=1.4]
  \setsansfont{TeX Gyre Heros} [Scale=MatchLowercase]
  \setmonofont{TeX Gyre Cursor}[Scale=MatchLowercase]
  \linespread{1.45}
\end{koodilohko}
\caption{Fonttikokojen määrittäminen suhteessa peruskirjainperheeseen}
\label{esim:fontti_suhteellinen}
\end{esimerkki*}

Viimeisellä rivillä oleva \koodi{\keno linespread}\-/komento on tärkeä.
Se asettaa rivikorkeuden kertoimeksi 1,45. Kertoimen täytyy olla
vähintään yhtä suuri kuin peruskirjainperheen skaalauskerroin (1,4),
jotta rivivälit ovat riittävän suuret. Näiden asetusten jälkeen
dokumentissa käytetään korkeamman tason komentoja fonttien valintaan,
esimerkiksi fonttikoon valintakomentoja \koodi{\keno small},
\koodi{\keno normalsize}, \koodi{\keno large} (taulukko
\ref{tlk:fonttikokokomennot}).

Edellä kuvatussa suhteellisessa kirjainperheiden koon määrittelyssä on
sellainen ongelma tai kummallisuus, että Latex koko ajan luulee, että
peruskirjainperhe on normaalikokoisena 10 pistettä (pt). Latexin matalan
tason fonttikomennot eivät tiedä kirjainperheen skaalauskertoimesta, ja
siksi esimerkiksi komentojen

\begin{koodilohkosis}
  \fontsize{10bp}{12bp} \selectfont
\end{koodilohkosis}

tuloksena ei todellisuudessa ole 10 pisteen (bp) fontti, vaan mukaan
lasketaan myös kirjainperheen skaalauskerroin. Tämän vuoksi \koodi{\keno
  fontsize}\-/komennon käyttö menee aika oudoksi. Argumenttina annettu
kokomitta ei pidä paikkaansa.

Jos korkean tason font\-ti\-koko\-komen\-to\-jen (taulukko
\ref{tlk:fonttikokokomennot}) lisäksi tarvitaan jotakin muuta kokoa,
voisi mahdollisesti \koodi{\keno fontsize}\-/komennon sijasta käyttää
\paketti{fontspec}\-/paketin tarjoamaa komentoa ja tilanteeseen sopivaa
skaalauskerrointa esimerkiksi seuraavalla tavalla:

\begin{koodilohkosis}
  {\addfontfeatures{Scale=3.2} Poikkeuksellisen isoa tekstiä}
\end{koodilohkosis}

Jos edellä mainitut kummallisuudet eivät häiritse eikä ole tarvetta
määritellä fontteja tarkasti tietyn pistekoon mukaiseksi, on
suhteellinen määrittelytapa todella helppo. Kaikki dokumentin fontit
määräytyvät perusfontin skaalauskertoimen kautta. Tämä tapa sopii hyvin
varsinkin dokumentin sisällön kirjoittamisvaiheeseen, jossa ehkä
halutaan vain nopeasti asettaa dokumentti suurin piirtein järkevän
näköiseksi. Myöhemmin voi määrittää koot tarkemmin niin sanotun
absoluuttisen menetelmän avulla, jota käsitellään seuraavassa luvussa.

\subsection{Koot absoluuttisesti}
\label{luku:fontti_absoluuttinen}

Absoluuttinen fonttien koonmääritystapa tarkoittaa sitä, että koot
asetetaan tietyn kokoiseksi käyttämällä esimerkiksi pistemittoja ja että
kirjaimet myös päätyvät lopulliseen dokumenttiin juuri sen kokoisena.
Tämä tapa on myös teknisesti eheä, eli Latexin eri osat ovat samaa
mieltä siitä, minkäkokoisesta fontista on kyse. Näin ei ollut
suhteellisen tavan kanssa (luku \ref{luku:fontti_suhteellinen}).

Joskus yrityksen, oppilaitoksen tai muun julkaisijan ohjeissa
määritellään tarkasti, mitä fontteja käytetään ja mikä on leipätekstin
ja otsikoiden fonttikoko. Silloin tarvitaan tässä luvussa kuvattua tapaa
fonttien asettamiseen.

\begin{esimerkki*}
\begin{koodilohko}
  \documentclass{article}
  \usepackage{fontspec}

  % Leipätekstiin samankokoiset fontit
  \setmainfont{TeX Gyre Termes}
  \setsansfont{TeX Gyre Heros} [Scale=MatchLowercase]
  \setmonofont{TeX Gyre Cursor}[Scale=MatchLowercase]

  % Muualle sans ja mono ilman skaalausta
  \newfontfamily{\sffamilyabs}{TeX Gyre Heros}
  \newfontfamily{\ttfamilyabs}{TeX Gyre Cursor}

  \linespread{1} % ei välttämättä tarvita

  % Kaikki tarvittavat fonttikoot ja komennot
  \renewcommand{\footnotesize}{\fontsize{10bp}{12bp}\selectfont}
  \renewcommand{\small}       {\fontsize{12bp}{14bp}\selectfont}
  \renewcommand{\normalsize}  {\fontsize{14bp}{17bp}\selectfont}
  \renewcommand{\large}       {\fontsize{17bp}{19bp}\selectfont}
  \renewcommand{\Large}       {\fontsize{20bp}{22bp}\selectfont}
  \normalsize % jotta tulee heti voimaan eikä vasta tekstiosassa
\end{koodilohko}
\caption{Fonttikokojen määrittäminen pistekoon avulla}
\label{esim:fontti_absoluuttinen}
\end{esimerkki*}

Esimerkistä \ref{esim:fontti_absoluuttinen} selviää perus\-ajatus.
Peruskirjainperhe (rivi~5) otetaan käyttöön ilman skaalausta (eli
\koodi{Scale=1}), minkä vuoksi koon voi jatkossa asettaa täsmälleen
kohdalleen \koodi{\keno fontsize}\-/komennolla. Samaa ei tehdä groteskin
eikä tasalevyisen fontin kanssa (rivit 6--7), vaan käytetään skaalausta
\koodi{MatchLowercase}, jotta tekstikappaleessa kaikki kirjainperheet
näyttävät samankokoisilta. Tässä menetetään mahdollisuus määrittää
näiden kirjainperheiden koko täsmällisesti pistemitan avulla. Jos siihen
on tarvetta esimerkiksi otsikoissa, voidaan käyttää rivien 10--11
komentoja. Niillä luodaan uudet kirjainperheet, jotka ovat käytännössä
samoja mutta ilman skaalausta.

Uusien skaalaamattomien kirjainperheiden komentojen nimiksi on valittu
\koodi{\keno sf\-fam\-i\-ly\-abs} ja \koodi{\keno tt\-fam\-i\-ly\-abs}
(vrt. \koodi{\keno sffamily} ja \koodi{\keno ttfamily}, taulukko
\ref{tlk:fonttimallikomennot}), ja näillä komennoilla kirjainperheet
kytketään päälle. Jos esimerkiksi jonkin julkaisun vaatimuksiin kuuluu,
että otsikossa täytyy olla 16 pisteen lihavoitu TeX Gyre Heros
\=/kirjainleikkaus, voi esimerkissä \ref{esim:fontti_absoluuttinen}
olevien asetusten pohjalta antaa otsikolle seuraavat komennot:

\begin{koodilohkosis}
  \sffamilyabs\fontsize{16bp}{18bp}\bfseries
\end{koodilohkosis}

Esimerkin \ref{esim:fontti_absoluuttinen} riveillä 16--20 määritellään
uudelleen Latexin korkean tason komennot, joilla fonttikoot asetetaan.
Oletus\-arvot tulevat dokumenttiluokasta (luku
\ref{luku:dokumenttiluokat}), mutta jos ne eivät ole sopivia, täytyy
vähintäänkin määritellä komento \koodi{\keno normal\-size} mutta sen
lisäksi kaikki ne koot, joita omassa dokumentissa tarvitaan. Tässä
esimerkissä normaali koko asetetaan 14 pisteen kokoiseksi.

Jokaiselle fonttikoolle määritetään riveillä 16--20 myös oma
rivikorkeus, ja se on tarkoitus asettaa sopivaksi juuri kyseiselle
koolle. Rivikorkeuteen vaikuttaa myös kerroin \koodi{\keno
  baselinestretch}, joka asetetaan komennolla \koodi{\keno linespread}.
Sitä ei välttämättä tarvitse käyttää, koska kirjainperheitä ei ole
skaalattu ja koska rivikorkeus asetetaan aina \koodi{\keno
  fontsize}\-/komennolla. \koodi{\keno linespread} on kuitenkin kätevä
komento rivikorkeuden säätämiseen yleisesti kaikkialla.

Fonttikokojen määrittelyn lopuksi rivillä 21 suoritetaan komento
\koodi{\keno normal\-size}, jotta se tulee heti voimaan. Dokumentin
esittelyosassa voidaan käyttää fonttikokoon viittaavia mittoja
\koodi{em} ja \koodi{ex}, ja ne viittaavat nyt tähän kokoon.
\koodi{\keno normal\-size}\-/komento suoritetaan kyllä myöhemmin
automaattisesti dokumentin tekstiosan eli \koodi{document}\-/ympäristön
alussa.

Edellä kuvatun absoluuttisen koonmääritystavan etuna on se, että
kirjoittaja hallitsee fonttien kokoa ja rivikorkeuksia tarkasti ja että
julkaisuun saadaan juuri ne mitat, jotka halutaan tai vaaditaan. Tapa on
myös teknisesti eheä eli toimii Latexin sisäisen logiikan näkökulmasta
oikein. Haittana voi pitää sitä, että kaikki koot täytyy määritellä
erikseen.

\subsection{Fonttien oletus\-asetuksia}

Oletuksena%
\koodimargin{\keno setmainfont \\ \keno setsansfont} Latex\-/dokumentin
peruskirjainperheessä (\koodi{\keno set\-main\-font}) ja
pääteviivattomassa kirjainperheessä (\koodi{\keno set\-sans\-font}) on
päällä muun muassa seuraavat asetukset:%

\begin{koodilohkosis}
  Ligatures={TeX, Common}
  HyphenChar={-}
\end{koodilohkosis}

\koodi{TeX}\-/ligatuurit tarkoittavat lainausmerkkien ja ajatusviivojen
tuottamiseen tarkoitettuja Texin erikoismerkkejä kuten \koodi{''} ja
\koodi{\==}, joita käsitellään luvuissa \ref{luku:lainausmerkit} ja
\ref{luku:yhdys_ajatus_miinus}. Ne eivät ole varsinaisia luonnollisen
kielen eivätkä typografisia ligatuureja vaan kuuluvat ainoastaan
Tex\-/kielen merkintätapoihin. \koodi{Common}\-/ligatuurit sen sijaan
ovat oikeita typografisia ligatuureja kuten fi, ff ja fl, ja niitä
käsitellään tarkemmin luvussa \ref{luku:typo_liga}. Molemmat edellä
mainitut ligatuurityypit saa pois päältä seuraavalla asetuksella:

\begin{koodilohkosis}
  Ligatures={TeXReset, NoCommon}
\end{koodilohkosis}

Valitsin \koodi{Hyphen\-Char} asettaa tavutusmerkin kyseiselle
kirjainperheelle. Oletuksena se on yhdysmerkki (\=/), mutta merkin
vaihtaminen muuksi kuin yhdysmerkiksi toimii vain Xelatex\-/kääntäjän
kanssa, ei esimerkiksi Lualatexilla. Sen sijaan kaikilla kääntäjillä
tavutuksen voi kytkeä kirjainperheeltä pois, kun antaa arvoksi
\koodi{None}. Tavutusta käsitellään perusteellisemmin luvussa
\ref{luku:tavutus}.

Tasalevyinen%
\koodimargin{\keno setmonofont} kirjainperhe (\koodi{\keno
  set\-mono\-font}) toimii oletuksena hieman eri tavalla. Niissä muun
muassa ei ole lainausmerkkien ja ajatusviivojen kirjoittamiseen
tarkoitetut Tex\-/ligatuurit päällä. Oletusasetuksia ovat muun muassa
seuraavat:

\begin{koodilohkosis}
  Ligatures=Common
  HyphenChar=None
\end{koodilohkosis}

Yleensä tasalevyisestä kirjainperheestä kannattaa kytkeä typografiset
ligatuurit pois päältä asetuksella \koodi{Liga\-tures=\katk No\-Common}.
Tasalevyisen fontin ajatukseen nimenomaan kuuluu, että merkit ovat
samanlevyisiä eikä yhden merkin tilaan sovi sulloa useampaa kirjainta.

Oletuksena tavutus on kytketty pois päältä, koska tasalevyistä fonttia
käytetään tavallisesti tietokoneisiin liittyvien koodien tai vastaavien
ilmausten latomiseen, eikä niitä haluta yleensä tavuttaa. Tavutuksen saa
kuitenkin päälle antamalla arvoksi yhdysmerkin
(\koodi{Hyphen\-Char=\katk \{\=/\}}) tai Xelatex\-/kääntäjällä minkä
tahansa merkin.

Komennolla%
\koodimargin{\keno default\-font\-features} \koodi{\keno
  default\-font\-features} voi asettaa (joidenkin) kirjainperheiden
oletusasetukset, kun komennon suorittaa ennen kirjainperheiden
määrittelyä.

\begin{koodilohkosis}
  \defaultfontfeatures[\rmfamily,\sffamily]{Ligatures={TeX, Common},
    Numbers=Lowercase}
\end{koodilohkosis}

Komennon valinnaisella argumentilla voi rajata, mitä kirjainperheitä
oletusasetukset koskevat. Valinnaiseen argumenttiin kirjoitetaan yksi
tai useampia pilkulla erotettuja komentoja, joilla kirjainperheet
kytketään päälle: \koodi{\keno rmfamily}, \koodi{\keno sffamily},
\koodi{\keno ttfamily} (taulukko \ref{tlk:fonttimallikomennot},
s.~\pageref{tlk:fonttimallikomennot}) tai komennolla \koodi{\keno
  new\-font\-family} määritelty fonttikomento (luku
\ref{luku:fontin_valinta}).

\subsection{Typografiset ligatuurit}
\label{luku:typo_liga}

Typografiset ligatuurit ovat fontissa olevia yhdistelmämerkkejä, joissa
on typografisista syistä yhdistetty kaksi tai useampia kirjaimia yhteen
merkkiin.%
\footnote{Typografisten ligatuurien lisäksi on olemassa myös
  luonnollisten kielten ligatuureja, jotka muodostavat kieleen kuuluvan
  kirjaimen, kuten æ norjan kielessä. Niillä on jokin luonnolliseen
  kieleen liittyvä merkitys, eikä eri merkkejä ei ole yhdistetty
  typografisista syistä.} Tällaisia ligatuureja käytettiin jo
metalliladonnassa, eli samassa metallikirjakkeessa saattoi olla enemmän
kuin yksi kirjain.

Typografisten ligatuurien tarkoituksena on tuottaa tyylikkäämpi
lopputulos kuin saataisiin erillisten kirjainten avulla. Syynä on
esimerkiksi se, että erilliset peräkkäiset kirjaimet eivät ole aina
keskenään yhteensopivia. Kirjainten välistys voi olla ongelmallista:
sopivalle etäisyydelle asetettaessa kirjainten osat voivat mennä
rumannäköisesti päällekkäin. Riippuu fontista, mitkä ligatuurit ovat
tarpeellisia ja mitkä ligatuurimerkit on ylipäätään toteutettu fontin
merkistöön. Tavallisia an\-tiik\-va\-kir\-jain\-leik\-kaus\-ten
ligatuureja ovat fi, ff, ffi, fl ja ffl, mutta jotkin fontit sisältävät
muitakin. Kuvaan \ref{kuva:ligatuurit} on koottu esimerkkejä.

\leijukuva{
  \erikoisfontti
  \addfontfeatures{Scale=3.5, Ligatures={Common, Historic}}
  fi ff ffi fl ffl Th fb st ct
}{
  \caption{Tavalliset f\=/alkuiset typografiset ligatuurit, vähän
    harvinaisemmat Th ja fb sekä erikseen päälle kytkettävät
    historialliset ligatuurit st ja ct}
  \label{kuva:ligatuurit}
}

Latex hoitaa tavallisten typografisten ligatuurien latomisen
automaattisesti, eli lähdedokumenttiin ei kannata kirjoittaa
Unicode\-/merkistön typografisia ligatuurimerkkejä (esimerkiksi
\uctunnus{u+fb01 latin small ligature fi}) vaan ihan tavallisia
erillisiä kirjaimia. \englanti{Open Type} \=/fontin suunnittelija on
päättänyt meidän puolestamme, mitkä kir\-jain\-yh\-dis\-tel\-mät on
parasta latoa ligatuurin avulla, ja ole\-tus\-ase\-tuk\-sil\-la Latex
noudattaa niitä ohjeita.

Jos kuitenkin yksittäisen ligatuurin muodostumisen haluaa estää, voi
kirjainten väliin kirjoittaa komennon \koodi{\keno
  text\-comp\-word\-mark}, joka tekee näkymättömän, juuri tähän
tarkoitukseen olevan merkin \uctunnus{u+200c zero width non-joiner}.

% \pagebreak[3]

\begin{koodilohkosis}
  fi f\textcompwordmark i
\end{koodilohkosis}

\begin{tulossis}
  fi f\textcompwordmark i
\end{tulossis}

Mikäli tavallisia ligatuureja ei halua käyttöön lainkaan, on parasta
valita jo kirjainperheen tai \=/leikkauksen käyttöönotossa asetus
\koodi{Liga\-tures=\katk No\-Com\-mon}. Väliaikaisesti fontin asetuksiin
voi vaikuttaa komennolla \koodi{\keno add\-font\-fea\-tures}, joka sekin
on \paketti{fontspec}\-/pakettiin sisältyvä komento.

\begin{koodilohkosis}
  {\addfontfeatures{Ligatures=NoCommon} fi fl}
\end{koodilohkosis}

Tavallisten ligatuurien lisäksi \englanti{Open Type} \=/fontit voivat
sisältää myös harvinaisempia ligatuureja, jotka täytyy erikseen kytkeä
päälle. Niiden tarkoituksena on esimerkiksi erityinen koristeellisuus
tai historiallisen kirjoitustavan jäljittely. Harvinaisia ligatuureja ei
ole tarkoitus käyttää joka tilanteessa vaan ainoastaan erityisestä
syystä. Kuvassa \ref{kuva:ligatuurit} ja tässäkin tekstissä olevat {%
  \newcommand{\hlig}[1]{{\erikoisfontti
      \addfontfeatures{Ligatures=Historic}#1}}%
  \hlig{st}- ja \hlig{ct}\-/ligatuurit%
} on saatu fontin asetuksella \koodi{Liga\-tures=\katk His\-toric}.
Joissakin fonteissa sama tehdään asetuksella \koodi{Liga\-tures=\katk
  Dis\-cre\-tionary}. Useitakin ligatuurityyppejä voi kytkeä päälle
samanaikaisesti:

\begin{koodilohkosis}
  Ligatures={TeX, Required, Common, Historic, Discretionary,
    Contextual}
\end{koodilohkosis}

Harva fontti sisältää kaikkia ligatuurityyppejä, eikä se ole
tarkoituskaan. Jotkin ligatuurit kuuluvat vain tiettyyn typografian
aikakauteen tai kirjaintyyliin. Open Type \=/fontin ominaisuuksia voi
selvittää käyttöjärjestelmän komentotulkissa komennolla
\koodi{otf\-info}. Komennon argumentiksi annetaan muun muassa
fonttitiedoston nimi.

\subsection{Numeroiden muoto}

Varsinkin kirjatypografiassa on tavallista käyttää pääasiassa
gemenanumeroita ({\gemenanum 1967}) eikä versaalinumeroita
({\versaalinum 1967}), koska gemenanumerot sopivat leipätekstin
gemenakirjainten kanssa paremmin yhteen. Versaalinumerot puolestaan
erottuvat paremmin ja sopivat esimerkiksi taulukoihin, joissa on paljon
lukuja. Näihin asetuksiin vaikutetaan fontin asetuksella
\koodi{Numbers}. Tosin kaikissa fonteissa ei gemenanumeroita edes ole.

\begin{koodilohkosis}
  Numbers=Lowercase % gemenanumerot
  Numbers=Uppercase % versaalinumerot (oletus)
\end{koodilohkosis}

Jotkin koodi-ilmaukset sisältävät versaalikirjaimia ja numeroita
sekaisin. Gemenanumerot eivät kuitenkaan sovi yhteen versaalikirjainten
kanssa, koska merkkien koko\-ero on häiritsevän suuri. Ei siis näin:
RJ45, R2D2. Gemenanumeroiden kanssa täytyy käyttää pienversaalia eli
kapiteelia: \textsc{rj45}, \textsc{r2d2}. Toinen vaihtoehto on käyttää
pelkästään versaaleja: {\versaalinum RJ45, R2D2}.

Silloin kun käytetään numeroita teknisten koodien ilmaisemiseen, voi
olla tarpeen merkitä numero nolla poikkiviivalla
({\addfontfeatures{Numbers={Uppercase, SlashedZero}} 0}), jottei se
sekoitu O\=/kirjaimeen. Nollaan saadaan poikkiviiva seuraavalla
asetuksella, jos vain fontissa on tämä ominaisuus:

\begin{koodilohkosis}
  Numbers=SlashedZero
\end{koodilohkosis}

Kun numeroita ladotaan taulukkoon, voidaan haluta käyttää tasalevyisiä
numeroita, jotta ne sijoittuvat allekkain samalle linjalle. Joissakin
fonteissa on tarjolla tavallisten vaihtelevan levyisten numeroiden
lisäksi myös tasalevyiset. Numeroiden leveyteen vaikutetaan seuraavilla
asetuksilla:

\begin{koodilohkosis}
  Numbers=Monospaced   % tasalevyiset numerot
  Numbers=Proportional % vaihtelevan levyiset numerot (oletus)
\end{koodilohkosis}

\subsection{Muita asetuksia}
\label{luku:fontit_muut}

Tässä luvussa käsitellään harvemmin tarvittavia mutta välillä
hyödyllisiä asetuksia, jotka eivät ole sidoksissa fonttitiedoston
ominaisuuksiin. Nämä asetukset muokkaavat fontin toimintaa kokonaan
Latexin puolella.

Valitsimella%
\koodimargin{Fake\-Stretch} \koodi{Fake\-Stretch} voi venyttää tai
kutistaa merkkejä leveyssuunnassa. Arvoksi annetaan
desimaalilukukerroin, joka on suhdeluku alkuperäiseen leveyteen nähden.
Seuraavassa havainnollistava esimerkki:

\begin{koodilohkosis}
  esimerkki \\
  {\addfontfeatures{FakeStretch=1.3} esimerkki}
\end{koodilohkosis}

\begin{tulossis}
  esimerkki \\
  {\addfontfeatures{FakeStretch=1.3} esimerkki}
\end{tulossis}

Kirjainleikkauksen leventäminen tekee tekstistä samalla lihavampaa,
koska kirjainten viivat tulevat vahvemmiksi leveyssuunnassa.
Korkeussuunnassa vahvuus säilyy ennallaan, joten kirjainten
viivakontrasti muuttuu. Kirjainleikkauksen kutistaminen vaikuttaa
lihavuuteen päinvastaisesti. Tällainen mekaaninen fontin
''korjaileminen'' ei välttämättä tuota typografisesti kovin hyvää jälkeä
mutta voi sopia lievästi käytettynä esimerkiksi otsikoihin. Tämän oppaan
tasalevyistä kirjainperhettä on hieman kutistettu, koska alkuperäinen on
kohtuuttoman leveä ({\ttfamily\addfontfeatures{FakeStretch=1}
  esimerkki}) verrattuna muiden kirjainperheiden leveyteen.

Jos%
\koodimargin{Fake\-Bold \\ Fake\-Slant} kirjainperheeseen ei sisälly
sopivaa lihavoitua tai kaltevaa leikkausta, voi sellaiset koettaa tehdä
myös keinotekoisesti \koodi{Fake\-Bold}- ja
\koodi{Fake\-Slant}\-/valitsimien avulla. Niille annetaan arvoksi
desimaalilukukerroin. Tosin \koodi{Fake\-Bold} toimii vain
Xelatex\-/kääntäjän kanssa.

\begin{koodilohkosis}
  pysty {\addfontfeatures{FakeSlant=.2} kalteva}
\end{koodilohkosis}

\begin{tulossis}
  pysty {\addfontfeatures{FakeSlant=.2} kalteva}
\end{tulossis}

Mekaanisen lihavoinnin tai kallistuksen saa osaksi kirjainperhettä, kun
asettaa kirjainperheen määrittelyn yhteydessä halutun kirjainleikkauksen
valitsimella \koodi{Bold\-Font} tai \koodi{Slanted\-Font} ja määrittää
niille erityisiä ominaisuuksia valitsimella \koodi{Bold\-Fea\-tures} tai
\koodi{Slanted\-Fea\-tures}. Seuraava esimerkki asettaa dokumentin
perusfontille kaltevan leikkauksen. Tämän jälkeen komento \koodi{\keno
  sl\-shape} (taulukko \ref{tlk:fonttimallikomennot},
s.~\pageref{tlk:fonttimallikomennot}) valitsee \textsl{kaltevan}
leikkauksen, joka on siis eri asia kuin \textit{kursiivi} (\koodi{\keno
  it\-shape}).

\begin{koodilohkosis}
  \setmainfont{…}[
    SlantedFont={…}, % tähän pystyasentoinen leikkaus
    SlantedFeatures={FakeSlant=.2}]
\end{koodilohkosis}

Fontin%
\koodimargin{Word\-Space} kanssa käytettäviä sanavälejä voi säätää
\koodi{Word\-Space}\-/valitsimella, jonka arvoksi annetaan
desimaalilukukerroin eli suhdeluku normaaliin verrattuna. Arvona voi
olla myös kolme eri kerrointa, jolloin mukana on lisäksi sanavälin
venymisen rajat. Tämä asetus on tehtävä kirjainperheen tai
\=/leikkauksen määrittelyn yhteydessä, eli se ei toimi esimerkiksi
\koodi{\keno add\-font\-features}\-/komennon kanssa. Katso tietoa
sanaväleistä myös luvusta \ref{luku:sanavali} tai tekstikappaleiden
latomista käsittelevästä luvusta \ref{luku:kappale}.

Fontti\-asetusten valitsimella%
\koodimargin{Letter\-Space} \koodi{Letter\-Space} säädetään merkkien
välistystä eli niiden välistä tyhjää tilaa. Arvoksi annetaan
positiivinen tai negatiivinen prosenttiluku, joka ilmaisee alkuperäiseen
lisättävän osuuden. Asetus \koodi{Letter\-Space=\katk 8} tuottaa siis 8
prosenttia leveämmät merkkien välit.

Välistyksen tiivistäminen voi sopia suuriin otsikoihin, kun taas
harventaminen voi sopia yksittäisiin versaali\-/{} tai
pienversaalikirjaimilla ladottaviin sanoihin. Näitä korostuskeinoja
käsitellään luvussa \ref{luku:korostus}, mutta seuraavassa on esimerkki,
kuinka se teknisesti toteutetaan:

\begin{koodilohkosis}
  \scshape normaali \\
  {\addfontfeatures{LetterSpace=8} harvennus}
\end{koodilohkosis}

\begin{tulossis}
  \scshape normaali \\
  {\addfontfeatures{LetterSpace=8} harvennus}
\end{tulossis}

Jos harvennuksen haluaa automaattisesti mukaan kirjainperheeseen
kuuluvaan pienversaaliin, käytetään valitsinta
\koodi{Small\-Caps\-Features}:

\begin{koodilohkosis}
  \setmainfont{…}[SmallCapsFeatures={LetterSpace=8}]
\end{koodilohkosis}

\section{Kieli}
\label{luku:kieliasetukset}

Melkein aina Latex\-/dokumenttiin täytyy ladata kielipaketti ja sen
mukana asetukset tiettyjä kieliä varten. Kieliasetukset sisältävät
ainakin tavutussäännöt (luku \ref{luku:tavutus}) sekä kielelle
mukautettuja nimiä dokumentin eri osille. Esimerkiksi sisällysluettelon
ja kirjallisuusluettelon otsikot tulevat kieliasetuksista, samoin
leijuvien taulukoiden ja kuvien nimet ''\tablename'' ja ''\figurename''.
Myös muita asetuksia tai komentoja saattaa tulla kieliasetusten mukana,
mutta ne vaihtelevat eri kielissä.

Kielipaketteja on kaksi -- \paketti{babel}\avctan{babel} ja
\paketti{polyglossia}\avctan{polyglossia} \==, ja käyttäjän täytyy
valita niistä jompikumpi. Pakettien historia ja kehitys on suunnilleen
seuraavanlainen: \paketti{babel} on paljon vanhempi, ja monet vanhat
oppaat ja esimerkit käsittelevät pelkästään sitä. Kun Latex siirtyi
Unicode\-/aikaan Xelatex\-/kääntäjän ja \paketti{fontspec}\-/paketin
myötä, \paketti{babel} ei pysynyt kehityksessä mukana. Syntyi
\paketti{polyglossia}, joka hallitsee Unicoden sekä muitakin kuin
latinalaiseen kirjaimistoon perustuvia kieliä ja kirjoitusjärjestelmiä.
\paketti{babel}\-/paketin kehitys ei kuitenkaan pysähtynyt, ja nykyään
myös se toimii Unicode\-/merkistön kanssa ainakin latinalaiseen
kirjaimistoon perustuvien kielten osalta.

Suomen kielen kannalta on aika lailla sama, kumpaa kielipakettia
käyttää. Meidän näkökulmastamme ''erikoisemmat'' kielet ja
kirjoitusjärjestelmät voivat vaatia \paketti{polyglossia}\-/paketin sekä
Lualatex\-/{} tai Xelatex\-/kääntäjän käyttöä. \paketti{babel} sisältää
enemmän ominaisuuksia, esimerkiksi omien komentojen ja muiden viritysten
tekemiseen; \paketti{polyglossia} on yksinkertaisempi paketti, jonka
kehitys tuntuisi keskittyvän vain ydintehtävään.

Seuraavissa alaluvuissa käsitellään kummankin kielipaketin tärkeimmät
toiminnot eli kielen valintaan liittyvät asiat. Yleinen ajatus on se,
että Latex\-/dokumentin esittelyosassa ladataan kielipaketti ja
määritellään dokumentin pääasiallinen kieli ja mahdolliset muut kielet.
Jos dokumentin tekstiosa sisältää muita kuin pääasiallista kieltä,
täytyy käyttää erityisiä komentoja tai ympäristöjä, joilla kerrotaan
Latexille, mistä kielestä on kyse.

\subsection{Polyglossia}

Kielipaketti \paketti{polyglossia} on tyypillinen valinta, jos halutaan
varmistaa, että Unicode\-/merkistöä (\textsc{utf\=/8}\-/merkistökoodaus)
voi käyttää vapaasti. Samalla se tarkoittaa, että kääntäjän on oltava
Lualatex tai Xelatex. Kielipaketin käyttöönotto dokumentin
esittelyosassa näyttää seuraavanlaiselta:

\begin{koodilohkosis}
  \usepackage{polyglossia}
  \setdefaultlanguage{finnish}
  \setotherlanguage{english}
  \setotherlanguage{greek}
\end{koodilohkosis}

Eri kielillä on erilaisia valinnaisia asetuksia, jotka täytyy selvittää
\paketti{polyglossia}\-/paketin ohjekirjasta. Asetukset liittyvät
esimerkiksi kielen kirjoitusjärjestelmän alueelliseen tai
historialliseen vaihteluun. Yleinen moniin kieliin sopiva valitsin on
\koodi{babel\-short\-hands}, joka lisää erilaisia, lähinnä tavutukseen
liittyviä komentoja (luku \ref{luku:tavutus}). Suomen kielen voisi siis
ottaa käyttöön myös seuraavalla tavalla:

\begin{koodilohkosis}
  \setdefaultlanguage[babelshorthands]{finnish}
\end{koodilohkosis}

Dokumentin tekstiosa käyttää kieltä, joka määriteltiin komennolla
\koodi{\keno set\-default\-lan\-guage}. Muita dokumentin esittelyosassa
määriteltyjä kieliä voi käyttää väliaikaisesti komennolla, joka alkaa
kirjaimilla \koodi{\keno text} ja jatkuu kielen nimellä, esimerkiksi
\koodi{\keno text\-english} tai \koodi{\keno text\-greek}.

\begin{koodilohkosis}
  Englannin sana \textenglish{shorthand} tarkoittaa 'pikakirjoitusta'.
\end{koodilohkosis}

Toinen vaihtoehto on käyttää kielen nimen mukaista ympäristöä:

\begin{koodilohkosis}
  \begin{greek}
    ...
  \end{greek}
\end{koodilohkosis}

Tietynkieliseksi merkitty teksti voi näyttää ladotussa dokumentissa ihan
samalta kuin muukin teksti. Tavutuksessa kuitenkin käytetään eri
kielissä eri asetuksia, ja joissakin kielissä voi olla myös pieniä
typografisia yksityiskohtia eri tavalla.

Käyttäjä voi määritellä eri kielille eri fontin. Oletuksena käytetään
peruskirjainperhettä, mikä samalla tarkoittaa, että kielen vaihtuessa
pois oletuskielestä suoritetaan \koodi{\keno rmfamily}\-/komento
(taulukko \ref{tlk:fonttimallikomennot},
s.~\pageref{tlk:fonttimallikomennot}). Tätä havainnollistaa seuraava
esimerkki, jossa \koodi{\keno text\-english}\-/komennon vaikutuksen
ajaksi tulee käyttöön perusfontti \koodi{\keno rmfamily} eikä ympärillä
oleva pääteviivaton \koodi{\keno sffamily}.

\begin{koodilohkosis}
  \sffamily
  pääteviivaton \textenglish{main font} pääteviivaton
\end{koodilohkosis}

\begin{tulossis}
  \sffamily pääteviivaton {\rmfamily main font} pääteviivaton
\end{tulossis}

Erikielisten tekstikatkelmien fonttiin voi vaikuttaa määrittelemällä
komennon, jonka nimessä on ensin kielen nimi ja lopuksi sana
\koodi{font}, esimerkiksi \koodi{\keno english\-font} tai \koodi{\keno
  greek\-font}. Komennon määritelmään kirjoitetaan yleensä
kirjainperheeseen tai \=/leikkaukseen vaikuttavia komentoja.

Seuraavassa esimerkissä \koodi{\keno english\-font}\-/komento
määritellään tyhjäksi, mikä saa aikaan sen, että englanninkieliseksi
merkitty teksti ei muuta fonttia millään tavalla vaan käytetään samaa
kirjainperhettä kuin muutenkin siinä kohdassa dokumenttia.

\begin{koodilohkosis}
  \newcommand{\englishfont}{}
\end{koodilohkosis}

Mikäli haluaa jollekin kielelle kokonaan eri kirjainperheen, kannattaa
käyttää \paketti{fontspec}\-/paketin komentoa \koodi{\keno
  new\-font\-fam\-i\-ly} (luku \ref{luku:fontin_valinta}) ja määritellä
kielen fonttikomennot sillä. Tällainen on tarpeen ainakin silloin, kun
dokumentin peruskirjainperhe ei sisällä kyseisen kielen kirjaimia.

\begin{koodilohkosis}
  \newfontfamily{\greekfont}{GFS Artemisia}[Scale=MatchLowercase]
\end{koodilohkosis}

% Seuraat eivät tunnu toimivan:

% \newfontfamily{\greekfontsf}{GFS Neohellenic} [Scale=MatchLowercase]
% \newfontfamily{\greekfonttt}{DejaVu Sans Mono}[Scale=MatchLowercase]
%
% Edellisen esimerkin \koodi{fontsf}\-/loppuinen komento tarkoittaa
% pääteviivatonta kirjainperhettä ja \koodi{fonttt}\-/loppuinen
% tasalevyistä perhettä.

% \textenglish{englantia \textsf{englantia} englantia}

\subsection{Babel}

Vanha kunnon \paketti{babel} toimii useiden eri Latex\-/kääntäjien
kanssa. Dokumentit kirjoitettiin ennen 8\=/bittisillä merkistöillä
(kuten \textsc{iso-8859\=/1}), jotka sisältävät vain reilut kaksisataa
merkkiä%
\footnote{Teknisesti 8\=/bittiset merkistöt sisältävät
  2\textsuperscript8 eli 256 merkkipaikkaa, mutta osa merkeistä on
  teknisiä ohjauskoodeja, jotka eivät liity ihmiskieliin.} %
ja soveltuvat tietyn rajallisen kielijoukon kirjoittamiseen. Nykyään
\paketti{babel} toimii myös Unicode\-/merkistön ja
\textsc{utf\=/8}\-/merkistökoodauksen kanssa ainakin latinalaiseen
kirjaimistoon perustuvien kielten osalta.

Kieliasetukset otetaan käyttöön \paketti{babel}\-/paketissa seuraavan
esimerkin tavoin. Paketin valinnaiseen argumenttiin kirjoitetaan
ladattavien kielten nimet ja viimeisenä mainitaan se kieli, joka
halutaan pääasialliseksi kieleksi.

\begin{koodilohkosis}
  \usepackage[english,greek,finnish]{babel}
\end{koodilohkosis}

Pääasiallisen kielen voi valita myös \koodi{main}\-/valitsimella:

\begin{koodilohkosis}
  \usepackage[main=finnish,english,greek]{babel}
\end{koodilohkosis}

Dokumentin tekstissä yksittäiset vieraskieliset sanat tai ilmaukset
merkitään komennolla \koodi{\keno foreign\-lan\-guage}. Komennon
ensimmäinen argumentti on kielen nimi ja toinen on sillä kielellä
ladottava teksti.

\begin{koodilohkosis}
  Englannin sana \foreignlanguage{english}{shorthand} tarkoittaa
  'pikakirjoitusta'.
\end{koodilohkosis}

Komennon sijasta voi käyttää ympäristöä \koodi{other\-lan\-guage}, joka
vaihtaa kieltä ympäristön ajaksi.

\begin{koodilohkosis}
  \begin{otherlanguage}{greek}
    ...
  \end{otherlanguage}
\end{koodilohkosis}

Kielen vaihtamista voi helpottaa \koodi{\keno babel\-tags}\-/komennolla,
joka määrittelee lyhempiä komentoja ja ympäristöjä kielen vaihtamiseen.
Komentoa käytetään seuraavan esimerkin tavoin. Sen jälkeen voi käyttää
englanninkielisen tekstin merkitsemiseen komentoa \koodi{\keno
  text\-eng\{\ldots\}} tai ympäristöä \koodi{eng}.

\begin{koodilohkosis}
  \babeltags{eng = english}
\end{koodilohkosis}

Oletuskieli voidaan vaihtaa kesken dokumentin komennolla \koodi{\keno
  select\-lan\-guage}. Komennon argumentiksi annetaan kielen nimi,
esimerkiksi seuraavalla tavalla:

\begin{koodilohkosis}
  \selectlanguage{english}
\end{koodilohkosis}

Eri kielille on mahdollista asettaa eri kirjainperheet \koodi{\keno
  babel\-font}\-/komennolla. Tämä komento korvaa
\paketti{fontspec}\-/paketin fontinvalintakomennot (luku
\ref{luku:fontin_valinta}) ja muodostaa uuden korkeamman tason komennon,
joka sisältää myös kielen. Jos siis käyttää komentoa \koodi{\keno
  babel\-font}, ei saa samanaikaisesti käyttää komentoja \koodi{\keno
  set\-main\-font}, \koodi{\keno set\-sans\-font} eikä \koodi{\keno
  set\-mono\-font}.

Oman dokumentin kirjainperheet voitaisiin määrittää \koodi{\keno
  babel\-font}\-/komennolla esimerkin \ref{esim:babelfont} tavoin. Ensin
esimerkissä määritellään peruskirjainperhe (\koodi{rm}), pääteviivaton
perhe (\koodi{sf}) ja tasalevyinen perhe (\koodi{tt}). Sen jälkeen
määritellään kreikan kielessä (\koodi{greek}) käytettävä
peruskirjainperhe ja pääteviivaton perhe.

\begin{esimerkki*}
\begin{koodilohko}
  \babelfont{rm}{TeX Gyre Termes}
  \babelfont{sf}[Scale=MatchLowercase]{TeX Gyre Heros}
  \babelfont{tt}[Scale=MatchLowercase]{TeX Gyre Cursor}

  \babelfont[greek]{rm}[Scale=MatchLowercase]{GFS Artemisia}
  \babelfont[greek]{sf}[Scale=MatchLowercase]{GFS Neohellenic}
\end{koodilohko}
\caption{\koodi{\keno babel\-font}\-/komennon käyttö dokumentin
  kirjainperheiden valintaan ja kielikohtaisten kirjainperheiden
  valintaan}
\label{esim:babelfont}
\end{esimerkki*}

Esimerkissä ennen fontin nimeä (esim. TeX Gyre Heros) oleva valinnainen
argumentti on sama kuin \paketti{fontspec}\-/paketin
fontinvalintakomennoissa. Sen avulla määritellään kyseisen
kirjainperheen asetuksia. Lisätietoa voi lukea fontteja käsittelevästä
luvusta \ref{luku:kirjaintyypit} ja \paketti{fontspec}\-/paketin
ohjekirjasta.\avctan{fontspec}
