\chapter{Dokumentin asetukset}
\section{Dokumenttiluokat}
\label{luku:dokumenttiluokat}

\section{Sivu}
\label{luku:sivuasetukset}
\subsection{Marginaalit ja mitat}
\subsection{Ylä- ja alatunnisteet}

\section{Fontit}
\label{luku:kirjaintyypit}

Fontit ja niiden asettaminen on Latexissa melko monimutkainen
kokonaisuus, koska fonteilla on paljon ominaisuuksia ja niihin
vaikutetaan monilla eri asetuksilla ja abstraktiotasoilla. Aika monta
asiaa pitää ymmärtää, jotta voi tehokkaasti työskennellä Latexin
fonttien kanssa.

Fontti jo itsessään on moniselitteinen käsite, joka vaatii typografiassa
usein täsmentäviä ilmauksia. Sana \emph{fontti} voi tarkoittaa
kokonaista kirjainperhettä eli yhteensopivien kirjainleikkausten
muodostamaa kokonaisuutta. Samaan kirjainperheeseen kuuluu yleensä
ainakin neljä eri leikkausta: tavallinen, \textit{kursiivi},
\textbf{lihavoitu} ja \textbf{\textit{lihavoitu kursiivi}}. Joihinkin
perheisiin kuuluu leikkauksia paljon enemmänkin, kuten useita eri
vahvuuksia. Joissakin puheissa sana \emph{fontti} tarkoittaa vain yhtä
kirjainleikkausta, ja silloin koko perheeseen viitataan ehkä sanalla
fonttiperhe.

Tässä oppaassa käytän \emph{fontti}\-/sanaa yleisnimityksenä Latexin
kirjaintyyppeihin liittyville asetuksille. Se tarkoittaa kirjainperhettä
tai siihen kuuluvaa yksittäistä leikkausta sekä asetuksia, jotka
liittyvät niihin. Silloin kun merkitystä pitää täsmentää, käytän
suomenkielisiä nimiä kirjainperhe ja kirjainleikkaus. Sen sijaan sanan
\emph{kirjasin} jätän kokonaan pois. Se tarkoittaa vanhassa
metalliladonnassa ja mekaanisissa kirjoituskoneissa metallisen
ladontakappaleen eli kirjakkeen päähän valettua kirjaimen tai muun
merkin kohokuviota, joka painaa mustejäljen paperille.

Kuten Latexissa yleensäkin myös fonttien kanssa kannattaa käyttää
korkean abstraktiotason komentoja, jotka piilottavat yksityiskohdat ja
teknisen toteutuksen. Latexin fonttitoiminnot on suunniteltu juuri
siihen: matalan tason font\-ti\-ase\-tuk\-set määritellään mieluiten
vain kerran dokumentin esittelyosassa, ja sen jälkeen käytetään
pelkästään korkean tason komentoja.

\subsection{Fontin valinta}

Latexin fonttien perus\-toiminnot rakentuvat kolmen erityyppisen
kirjainperheen varaan: antiikva eli pääteviivallinen%
\footnote{Antiikva (lat. \emph{antiquus} 'vanha') perustuu antiikin
  Roomassa käytettyihin kirjainmuotoihin. Ne olivat pääteviivallisia,
  mutta pääteviivat sinänsä eivät ole ainoa antiikvan piirre. Toinen
  tärkeä ominaisuus ovat erivahvuiset kirjainten viivat.}
(\textenglish{serif, roman}), groteski eli pääteviivaton%
\footnote{Groteskiin (ransk. \emph{grotesque} 'kummallinen') kuuluu
  pääteviivojen puuttumisen lisäksi lähes tasavahvuiset kirjainten
  viivat. Tämän oppaan groteskifontissa on kuitenkin selvästi
  antiikvamaiset kaksivahvuiset viivat, joten se on eräänlainen
  antiikvan ja groteskin välimuoto.} (\textenglish{sans serif, gothic})
ja tasalevyinen kirjoituskoneen kaltainen perhe
(\textenglish{typewriter, monospace}). Kuvassa
\ref{kuva:kirjainperhetyypit} ovat tässä oppaassa käytetyt kolme eri
kirjainperhettä. Leipätekstissä käytetään antiikvaa, otsikoissa ja
kuvateksteissä groteskia ja koodi\-esi\-mer\-keis\-sä tasalevyistä.
Kirjoituskoneen kaltainen tasalevyinen kirjainperhe on tässä tapauksessa
tyypiltään antiikva eli pääteviivallinen, mutta se voisi olla muutakin.
Tasalevyisyys on sen kirjainperheen tärkein määrittävä tekijä Latexin
asetusten näkökulmasta.

\leijukuva{
  {\rmfamily\addfontfeatures{ScaleAgain=5}Amf}
  \hfill
  {\sffamily\addfontfeatures{ScaleAgain=5}Amf}
  \hfill
  {\ttfamily\addfontfeatures{FakeStretch=1, ScaleAgain=5}Amf}
}{
  \caption{Vasemmalla pääteviivallinen, keskellä pääteviivaton ja
    oikealla tasalevyinen pääteviivallinen kirjainperhe}
  \label{kuva:kirjainperhetyypit}
}

Latexin fonttitekniikka rakentuu eri-ikäisistä kerroksista ja
tekniikoista. Fontteja on tehty esimerkiksi Metafont\-/nimisellä
kuvauskielellä, jolla tuotetaan bittikarttafontteja eli pikseleistä
koostuvia fontteja. Ne voidaan muuttaa Post Script Type~1 \=/muotoon ja
käyttää Latexissa. Myöhemmin mukaan ovat tulleet monipuoliset True Type-
ja Open Type \=/muotoiset fontit, ja niihin tämä opas keskittyy.

Joidenkin fonttien käyttöönottoon on tehty oma makropakettinsa, joten
sellaiset fontit voi ladata dokumentin esittelyosassa komennolla
\koodi{\keno usepackage}. Fonttikohtaisia makropaketteja on olemassa
varsinkin vanhalle fonttitekniikalle (Metafont, Post Script Type~1)
mutta myös matematiikkatilan (luku \ref{luku:matematiikka})
fonttiasetuksille ja joillekin kir\-jain\-perhe\-koko\-nai\-suuk\-sille.

Valmiita makropaketteja on vain joillekin fonteille, ja käytännössä
yleensä True Type- ja Open Type \=/muodossa olevat kirjainperheet
otetaan käyttöön \paketti{fontspec}\-/paketin komennoilla alla olevan
esimerkin mukaisesti.

\begin{koodilohkosis}
  \setmainfont{TeX Gyre Termes}[Scale=1]
  \setsansfont{TeX Gyre Heros} [Scale=MatchLowercase]
  \setmonofont{TeX Gyre Cursor}[Scale=MatchLowercase]
\end{koodilohkosis}

Edellisessä esimerkissä TeX Gyre Termes, Heros ja Cursor ovat
kirjainperheiden nimiä. Fonttitiedostojen tulee olla asennettuna
käyttöjärjestelmän normaalien käytäntöjen mukaisesti tai Latex\-/jakelun
käytäntöjen mukaisesti.

Kirjainperheiden käyttöönoton yhteydessä voi määritellä lukuisia
asetuksia kuten ligatuureja, gemenanumeroita, optisia kokoja ja muita
fontin ominaisuuksia. Edellisessä esimerkissä käytetään vain
\koodi{Scale}\-/valitsinta, jolla fontin voi skaalata haluttuun kokoon.

Peruskirjainperheen (\koodi{\keno set\-main\-font}) skaalaukseksi
asetetaan \koodi{Scale=1}, eli sille ei tehdä mitään, ja koko valitsimen
voisi jättää pois. Sen sijaan kahdella muulla kirjainperheellä
(\koodi{\keno set\-sans\-font}, \koodi{\keno set\-mono\-font}) käytetään
ker\-roin\-ase\-tus\-ta \koodi{MatchLowercase}, joka skaalaa fontin
siten, että gemenakirjaimet eli pienet kirjaimet ovat yhtä korkeita kuin
peruskirjainperheessä. Mikäli skaa\-laus\-ase\-tus
\koodi{MatchLowercase} ei tuota ihan toivottua tulosta, voi
kirjainperheen skaalausta hienosäätää vielä
\koodi{Scale\-Again}\-/valitsimella seuraavaan tapaan:

\begin{koodilohkosis}
  \setmonofont{TeX Gyre Cursor}
  [Scale=MatchLowercase, ScaleAgain=.97]
\end{koodilohkosis}

\pagebreak[3]

Jos edellä kuvatut kolme kirjainperhettä eivät riitä, on
\paketti{fontspec}\-/paketissa komennot lisäperheiden ja \=/leikkausten
määrittämiseen. Uusi perhe määritellään seuraavasti:

\begin{koodilohkosis}
  \newfontfamily{\hienoperhe}{TeX Gyre Schola}[…]
\end{koodilohkosis}

Komento \koodi{\keno new\-font\-family} toimii samalla tavalla kuin
aiemmin esitellyt \koodi{\keno set\-main\-font} ym. komennot, mutta
lisäksi ensimmäinen argumentti määrittää komennon, jolla kirjainperhe
otetaan käyttöön. Edellisessä esimerkissä luodaan komento \koodi{\keno
  hieno\-perhe}, joka kytkee päälle TeX Gyre Scho\-la \=/nimisen
kirjainperheen.

\pagebreak[3]

Jos ei tarvita kokonaista perhettä vaan yksi leikkaus riittää, käytetään
komentoa \koodi{\keno new\-font\-face}:

\begin{koodilohkosis}
  \newfontface{\hienoleikkaus}{TeX Gyre Schola Bold}[…]
\end{koodilohkosis}

Edellä määriteltävä komento \koodi{\keno hieno\-leikkaus} ottaa käyttöön
lihavoidun (bold) kirjainleikkauksen perheestä TeX Gyre Scho\-la. Tässä
vaih\-to\-eh\-dos\-sa on se etu, että tietokoneen muistiin ladataan vain
yksi leikkaus, ei koko perhettä.

\subsection{Fontin koko ja rivikorkeus}

Fonttien koot on tapana valita ja ilmaista typografisen pistemitan
avulla. Esimerkiksi 10--12 pistettä on tyypillinen leipätekstin
oletuskoko teks\-tin\-kä\-sit\-tely\-ohjel\-mis\-sa. Piste on
typografiassa mitta\-yksikkö, jonka pituus on määritelty eri tavoin eri
aikoina ja eri kulttuureissa.

Myös Latexissa fonttien koot voi määritellä pistemittojen avulla. Niitä
ja muitakin Latexin mit\-ta\-yk\-si\-köi\-tä käsitellään tarkemmin
luvussa \ref{luku:mitat}. Fonteissa ole\-tus\-mitta\-yk\-sik\-kö\-nä on
vanha pica\-/järjestelmän piste, jonka pituus on noin \num{0,3515}
millimetriä. Sen lyhenne Latexissa on~\emph{pt}. Tämän oppaan
esimerkeissä käytetään kuitenkin Post Script \=/standardin mukaista,
julkaisuohjelmiin vakiintunutta uudempaa pica\-/pistettä, joka on hieman
edellistä pidempi: noin \num{0,3528} millimetriä. Latexissa sen lyhenne
on~\emph{bp}. Ero näiden kahden pistemitan välillä on hyvin pieni,
tavallisilla fonttiko'oilla käytännössä merkityksetön.

Kirjainleikkauksen koko mitataan merkistön ylimmän ja alimman kohdan
välillä, esimerkiksi k\=/kirjaimen ylimmän pisteen ja y\=/kirjaimen
alimman pisteen välillä. Lisäksi mittaan luetaan mukaan merkistön ylä-
ja alapuolella oleva pieni tyhjä tila, jonka fontin suunnittelija on
määritellyt.

Matalalla tasolla fonttien kokoon vaikuttaa Latexissa eräs yllättävä
asia. Nimittäin dokumenttiluokalle (luku \ref{luku:dokumenttiluokat})
voi antaa valitsimen, jolla koko asetetaan. Vaihtoehtoja on Latexin
normaaleissa dokumenttiluokissa vain kolme: \koodi{10pt} (oletus),
\koodi{11pt} ja \koodi{12pt}. Dokumenttiluokan koko\-asetus vaikuttaa
myös sivun marginaaleihin, koska Latex pyrkii pitämään rivin
merkkimäärän lukijalle sopivana: yhdelle riville ei kannata latoa ihan
mahdottomasti merkkejä, koska rivin seuraaminen vaatii enemmän
keskittymistä.

Fontin koon määrittäminen dokumenttiluokan valitsimella ehkä kuuluu jo
vähän menneisyyteen, mutta voi sitä edelleen käyttää, jos se riittää ja
sillä saa halutun lopputuloksen. Yleensä lienee järkevää jättää
dokumenttiluokan fonttiasetus oletukseksi (\koodi{10pt}) ja käyttää koon
asettamiseen luvuissa \ref{luku:fontti_suhteellinen} ja
\ref{luku:fontti_absoluuttinen} kerrottuja tapoja. Sivun marginaalien ja
muiden mittojen määrittämiseen on ohjeita luvussa
\ref{luku:sivuasetukset}.

Fonttiasetuksiin kuuluu fontin koon lisäksi toinenkin mitta: rivikorkeus
(\koodi{\keno base\-line\-skip}). Se on mitta rivin peruslinjalta edellisen
rivin peruslinjalle. Fontin koko ja rivikorkeus määritellään
saman\-aikaisesti, koska ne ovat saman \koodi{\keno fontsize}\-/komennon
argumentteja. Esimerkki:

\begin{koodilohkosis}
  \fontsize{10bp}{12bp} \selectfont
\end{koodilohkosis}

Ensimmäinen argumentti on fontin kokomitta ja toinen on rivikorkeus.
Mitta\-yksiköt voivat olla mitä tahansa Latexin mittoja, ja oletuksena
käytetään pt\-/pistemittaa, jos yksikköä ei ole mainittu. Komento
\koodi{\keno select\-font} on mukana, koska vasta sen myötä matalan
tason fonttikomennot tulevat voimaan. Korkean tason fonttikomennot (luku
\ref{luku:fontit_korkea}) suorittavat sen automaattisesti.

Rivikorkeus on vähintään sama kuin fontin koko, mutta yleensä se
asetetaan pari pistettä suuremmaksi, jotta rivit eivät olisi liian
lähellä toisiaan. Esimerkissä \ref{esim:rivikorkeus} on kaksi erilaista
\koodi{\keno fontsize}\-/komentoa ja ladottu lopputulos.

\begin{esimerkki*}
\begin{koodilohko}
  \fontsize{8bp}{11bp}\selectfont Tässä on pienehkö leipätekstin
  fonttikoko ja suhteellisen suuri rivikorkeus. Pitkät rivit vaativat
  suuremman rivikorkeuden kuin lyhyet rivit.

  \fontsize{16bp}{17bp}\selectfont Tässä on melko suuri fontti ja
  suhteellisen pieni rivikorkeus. Suuri fontti ja lyhyet rivit eivät
  tarvitse kovin suurta rivikorkeutta.
\end{koodilohko}
\parbox{\linewidth}{%
  \linespread{1}
  \fontsize{8bp}{11bp}\selectfont Tässä on pienehkö leipätekstin
  fonttikoko ja suhteellisen suuri rivikorkeus. Pitkät rivit vaativat
  suuremman rivikorkeuden kuin lyhyet rivit.

  \fontsize{16bp}{17bp}\selectfont Tässä on melko suuri fontti ja
  suhteellisen pieni rivikorkeus. Suuri fontti ja lyhyet rivit eivät
  tarvitse kovin suurta rivikorkeutta. }

\vspace{1ex}
\hrulefill
\vspace{2ex}

\caption{Fontin koon ja rivikorkeuden asettaminen ja vaikutus}
\label{esim:rivikorkeus}
\end{esimerkki*}

Toinen tekstirivien peruslinjojen väliseen etäisyyteen vaikuttava asetus
on \koodi{\keno baselinestretch}. Se on desimaalilukukerroin, jolla
nykyinen rivikorkeus kerrotaan. Kerroin asetetaan helpoimmin komennolla
\koodi{\keno linespread}.\footnote{Toinen tapa: \koodi{\keno
    renewcommand\{\keno baselinestretch\}\{kerroin\}}}

\begin{koodilohkosis}
  \fontsize{10bp}{12bp} \linespread{1.3} \selectfont
\end{koodilohkosis}

Edellä oleva esimerkki asettaa fontin kooksi 10 pistettä ja
rivikorkeudeksi 12 pistettä. \koodi{\keno linespread}\-/komennolla
asetetun kertoimen vuoksi rivien peruslinjojen väliseksi etäisyydeksi
tulee lopulta 1,3 kertaa 12 pistettä eli 15,6 pistettä. Ei ole väliä,
kummassa järjestyksessä \koodi{\keno fontsize}- ja \koodi{\keno
  linespread}\-/komennot annetaan. Asetukset tulevat voimaan vasta
\koodi{\keno select\-font}\-/komennon jälkeen.

Käytännössä \koodi{\keno linespread} sopii rivikorkeuden yleistason
hienosäätöön, esimerkiksi dokumentin esittelyosassa. Sitä ei kannattane
kovin paljon muutella, koska se vaikuttaa kaikkialla. Sen sijaan
\koodi{\keno fontsize}\-/komennolla määritetään rivikorkeus tietylle
fonttikoolle ja tiettyyn tilanteeseen.

\subsection{Korkean tason komennot}
\label{luku:fontit_korkea}

Latexissa on joukko korkean tason fonttikomentoja, jotka on tarkoitettu
käytettäväksi sen jälkeen, kun matalan tason asetukset on kerran
määritetty. Taulukossa \ref{tlk:fonttimallikomennot} on komennot
kirjainperheen ja kirjainleikkauksen valintaan. Kirjainperhekomento
vaihtaa koko perheen kaikkine leikkauksineen, ja kirjainleikkauskomento
valitsee toisen leikkauksen samasta perheestä.

\leijutlk{
  \begin{tabular}{llll}
    \toprule
    \multicolumn{2}{l}{\ots{Komento}}
    & \multicolumn{2}{l}{\ots{Merkitys}} \\
    \midrule
    \koodi{\keno rmfamily} & \koodi{\keno textrm\{\}}
    & {\rmfamily perhe} & antiikva, serif, roman \\
    \koodi{\keno sffamily} & \koodi{\keno textsf\{\}}
    & {\sffamily perhe} & groteski, sans serif, gothic \\
    \koodi{\keno ttfamily} & \koodi{\keno texttt\{\}}
    & {\ttfamily perhe} & tasalevyinen, typewriter \\
    \midrule
    \koodi{\keno mdseries} & \koodi{\keno textmd\{\}}
    & {\mdseries leikkaus} & tavallinen vahvuus, medium \\
    \koodi{\keno bfseries} & \koodi{\keno textbf\{\}}
    & {\bfseries leikkaus} & lihavoitu, bold \\
    \midrule
    \koodi{\keno upshape} & \koodi{\keno textup\{\}}
    & {\upshape leikkaus} & pystyasento, tavallinen \\
    \koodi{\keno slshape} & \koodi{\keno textsl\{\}}
    & {\slshape leikkaus} & kalteva, slanted, oblique \\
    \koodi{\keno itshape} & \koodi{\keno textit\{\}}
    & {\itshape leikkaus} & kursiivi, italic \\
    \koodi{\keno scshape} & \koodi{\keno textsc\{\}}
    & {\scshape leikkaus} & pienversaali, kapiteeli, small caps \\
    \bottomrule
  \end{tabular}
}{
  \caption{Komennot kirjainperheen ja kirjainleikkauksen valintaan}
  \label{tlk:fonttimallikomennot}
}

Kirjainleikkauksen asetukset jaetaan kahteen ryhmään:
\textenglish{\emph{series}} 'sarja' ja \textenglish{\emph{shape}}
'muoto'. Kummastakin ryhmästä on valittuna aina yksi ominaisuus, eli
samanaikaisesti voi olla voimassa esimerkiksi \koodi{\keno bf\-se\-ries}
(\textbf{lihavoitu}) ja \koodi{\keno it\-shape} (\textit{kursiivi}), ja
tuloksena on \textbf{\itshape lihavoitua kursiivia}.

Tämän oppaan fontissa kalteva leikkaus (\koodi{\keno sl\-shape}) ja
kursiivileikkaus (\koodi{\keno it\-shape}) tuottavat saman
lopputuloksen. Niin on useimmissa muissakin fonteissa, mutta
käsitteellisesti ne ovat eri asia. Edellä mainitut komennot voivat
joissakin fonteissa valita eri leikkauksen. Kalteva leikkaus on
tavallisen eli pys\-ty\-asen\-toi\-sen leikkauksen kallistettu versio.
Kallistus on voitu tehdä mekaanisesti, mutta se voi olla myös
kirjainmuotoilijan piirtämä leikkaus. Kursiivi puolestaan on aina
muodoltaan erilainen leikkaus. Se hieman mukailee
käsi\-ala\-kir\-joi\-tusta, joskaan kirjaimia ei ole sidottu toisiinsa.

Komennot fontin koon valintaan ovat taulukossa
\ref{tlk:fonttikokokomennot}. Taulukko kertoo myös, mitä fontin
pistekokoa (pt) mikäkin komento tarkoittaa oletuksena. Oletus riippuu
Latexin dokumenttiluokkien (luku \ref{luku:dokumenttiluokat})
fonttikokovalitsimista \koodi{10pt}, \koodi{11pt} ja \koodi{12pt}.

\leijutlk{
  \begin{tabular}{lr@{}lr@{}lr@{}l}
    \toprule
    \ots{Komento}
    & \multicolumn{2}{c}{\ots{10pt}}
    & \multicolumn{2}{c}{\ots{11pt}}
    & \multicolumn{2}{c}{\ots{12pt}} \\
    \midrule
    \koodi{\keno tiny} & 5 && 6 && 6 \\
    \koodi{\keno scriptsize} & 7 && 8 && 8 \\
    \koodi{\keno footnotesize} & 8 && 9 && 10 \\
    \koodi{\keno small} & 9 && 10 && 10&,95 \\
    \koodi{\keno normalsize} & 10 && 10&,95 & 12 \\
    \koodi{\keno large} & 12 && 12 && 14&,4 \\
    \koodi{\keno Large} & 14&,4 & 14&,4 & 17&,28 \\
    \koodi{\keno LARGE} & 17&,28 & 17&,28 & 20&,74 \\
    \koodi{\keno huge} & 20&,74 & 20&,74 & 24&,88 \\
    \koodi{\keno Huge} & 24&,88 & 24&,88 & 24&,88 \\
    \bottomrule
  \end{tabular}
}{
  \caption{Fonttien oletuspistekoot dokumenttiluokkien valitsimilla
    \koodi{10pt}, \koodi{11pt} ja \koodi{12pt}}
  \label{tlk:fonttikokokomennot}
}

\pagebreak[3]

Kaikille korkean tason fonttikomennoille on olemassa myös samanniminen
ympäristönsä. Seuraavassa esimerkissä on kaksi fontteihin vaikuttavaa
ympäristöä sisäkkäin.

\pagebreak[3]

\begin{koodilohkosis}
  \begin{footnotesize}
    \begin{scshape}
      Tämä teksti on pienen pientä pienversaalia.
    \end{scshape}
  \end{footnotesize}
\end{koodilohkosis}

\begin{tulossis}
  \begin{footnotesize}
    \begin{scshape}
      Tämä teksti on pienen pientä pienversaalia.
    \end{scshape}
  \end{footnotesize}
\end{tulossis}

\pagebreak[3]

\subsection{Koot suhteellisesti}
\label{luku:fontti_suhteellinen}

Dokumentin fonttien koot on helpointa määrittää siten, että asettaa
ensin peruskirjainperheen koon ja antaa muiden fonttien määräytyä
suhteessa siihen. Esimerkki \ref{esim:fontti_suhteellinen} selventää,
kuinka se tapahtuu. Alussa otetaan käyttöön dokumenttiluokka
\koodi{article} ja annetaan sille valitsin \koodi{10pt}, joka määrittää
fonttikooksi 10 pistettä. Se on dokumenttiluokan ole\-tus\-ase\-tus,
jota ei tarvitsisi edes kirjoittaa näkyviin. Esimerkin toisella rivillä
otetaan \paketti{fontspec}\-/paketti käyttöön.

Peruskirjainperheen (rivi~4) koko skaalataan 1,4\-/kertaiseksi, eli
pistekooksi tulee 1,4 kertaa 10 pistettä eli 14 pistettä (pt).
Normaalikokoinen peruskirjainperhe on ainoa, jonka pistekoko tiedetään.
Kaikkien muiden koot täytyisi selvittää laskemalla.

Groteski eli pääteviivaton kirjainperhe (rivi~5) ja tasalevyinen perhe
(rivi~6) skaalataan samankorkuiseksi kuin perusperhe. Vertailukohtana
ovat gemenat eli pienaakkoset (\koodi{MatchLowercase}). Näiden kahden
kirjainperheen pistekokoa ei tiedetä. Se ei välttämättä ole sama kuin
perusfontissa, koska fonttien pistekoko mitataan ylimmän ja alimman
kohdan välillä ja koska fonttien mittasuhteet ovat erilaisia.

\begin{esimerkki*}
\begin{koodilohko}
  \documentclass[10pt]{article} % 10pt on oletus
  \usepackage{fontspec}

  \setmainfont{TeX Gyre Termes}[Scale=1.4]
  \setsansfont{TeX Gyre Heros} [Scale=MatchLowercase]
  \setmonofont{TeX Gyre Cursor}[Scale=MatchLowercase]
  \linespread{1.45}
\end{koodilohko}
\caption{Fonttikokojen määrittäminen suhteessa peruskirjainperheeseen}
\label{esim:fontti_suhteellinen}
\end{esimerkki*}

Viimeisellä rivillä oleva \koodi{\keno linespread}\-/komento on tärkeä.
Se asettaa rivikorkeuden kertoimeksi 1,45. Kertoimen täytyy olla
vähintään yhtä suuri kuin peruskirjainperheen skaalauskerroin (1,4),
jotta rivivälit ovat riittävän suuret. Näiden asetusten jälkeen
dokumentissa käytetään korkeamman tason komentoja fonttien valintaan,
esimerkiksi fonttikoon valintakomentoja \koodi{\keno small},
\koodi{\keno normalsize}, \koodi{\keno large} (taulukko
\ref{tlk:fonttikokokomennot}).

Edellä kuvatussa suhteellisessa kirjainperheiden koon määrittelyssä on
sellainen ongelma tai kummallisuus, että Latex koko ajan luulee, että
peruskirjainperhe on normaalikokoisena 10 pistettä (pt). Latexin matalan
tason fonttikomennot eivät tiedä kirjainperheen skaalauskertoimesta, ja
siksi esimerkiksi komentojen

\begin{koodilohkosis}
  \fontsize{10bp}{12bp} \selectfont
\end{koodilohkosis}

tuloksena ei todellisuudessa ole 10 pisteen (bp) fontti, vaan mukaan
lasketaan myös kirjainperheen skaalauskerroin. Tämän vuoksi \koodi{\keno
  fontsize}\-/komennon käyttö menee aika oudoksi. Argumenttina annettu
kokomitta ei pidä paikkaansa.

Jos korkean tason font\-ti\-koko\-komen\-to\-jen (taulukko
\ref{tlk:fonttikokokomennot}) lisäksi tarvitaan jotakin muuta kokoa,
voisi mahdollisesti \koodi{\keno fontsize}\-/komennon sijasta käyttää
\paketti{fontspec}\-/paketin tarjoamaa komentoa ja tilanteeseen sopivaa
skaalauskerrointa esimerkiksi seuraavalla tavalla:

\begin{koodilohkosis}
  {\addfontfeatures{Scale=3.2}Poikkeuksellisen isoa tekstiä}
\end{koodilohkosis}

Jos edellä mainitut kummallisuudet eivät häiritse eikä ole tarvetta
määritellä fontteja tarkasti tietyn pistekoon mukaiseksi, on
suhteellinen määrittelytapa todella helppo. Kaikki dokumentin fontit
määräytyvät perusfontin skaalauskertoimen kautta. Tämä tapa sopii hyvin
varsinkin dokumentin sisällön kirjoittamisvaiheeseen, jossa ehkä
halutaan vain nopeasti asettaa dokumentti suurin piirtein järkevän
näköiseksi. Myöhemmin voi määrittää koot tarkemmin niin sanotun
absoluuttisen menetelmän avulla, jota käsitellään seuraavassa luvussa.

\subsection{Koot absoluuttisesti}
\label{luku:fontti_absoluuttinen}

Absoluuttinen fonttien koonmääritystapa tarkoittaa sitä, että koot
asetetaan tietyn kokoiseksi käyttämällä esimerkiksi pistemittoja ja että
kirjaimet myös päätyvät lopulliseen dokumenttiin juuri sen kokoisena.
Tämä tapa on myös teknisesti eheä, eli Latexin eri osat ovat samaa
mieltä siitä, minkäkokoisesta fontista on kyse. Näin ei ollut
suhteellisen tavan kanssa (luku \ref{luku:fontti_suhteellinen}).

Joskus yrityksen, oppilaitoksen tai muun julkaisijan ohjeissa
määritellään tarkasti, mitä fontteja käytetään ja mikä on leipätekstin
ja otsikoiden fonttikoko. Silloin tarvitaan tässä luvussa kuvattua tapaa
fonttien asettamiseen.

\begin{esimerkki*}
\begin{koodilohko}
  \documentclass{article}
  \usepackage{fontspec}

  % Leipätekstiin samankokoiset fontit
  \setmainfont{TeX Gyre Termes}
  \setsansfont{TeX Gyre Heros} [Scale=MatchLowercase]
  \setmonofont{TeX Gyre Cursor}[Scale=MatchLowercase]

  % Muualle sans ja mono ilman skaalausta
  \newfontfamily{\sffamilyabs}{TeX Gyre Heros}
  \newfontfamily{\ttfamilyabs}{TeX Gyre Cursor}

  \linespread{1} % ei välttämättä tarvita

  % Kaikki tarvittavat fonttikoot ja komennot
  \renewcommand{\footnotesize}{\fontsize{10bp}{12bp}\selectfont}
  \renewcommand{\small}       {\fontsize{12bp}{14bp}\selectfont}
  \renewcommand{\normalsize}  {\fontsize{14bp}{17bp}\selectfont}
  \renewcommand{\large}       {\fontsize{17bp}{19bp}\selectfont}
  \renewcommand{\Large}       {\fontsize{20bp}{22bp}\selectfont}
  \normalsize % jotta tulee heti voimaan eikä vasta tekstiosassa
\end{koodilohko}
\caption{Fonttikokojen määrittäminen pistekoon avulla}
\label{esim:fontti_absoluuttinen}
\end{esimerkki*}

Esimerkistä \ref{esim:fontti_absoluuttinen} selviää perus\-ajatus.
Peruskirjainperhe (rivi~5) otetaan käyttöön ilman skaalausta (eli
\koodi{Scale=1}), minkä vuoksi koon voi jatkossa asettaa täsmälleen
kohdalleen \koodi{\keno fontsize}\-/komennolla. Samaa ei tehdä groteskin
eikä tasalevyisen fontin kanssa (rivit 6--7), vaan käytetään skaalausta
\koodi{MatchLowercase}, jotta tekstikappaleessa kaikki kirjainperheet
näyttävät samankokoisilta. Tässä menetetään mahdollisuus määrittää
näiden kirjainperheiden koko täsmällisesti pistemitan avulla. Jos siihen
on tarvetta esimerkiksi otsikoissa, voidaan käyttää rivien 10--11
komentoja. Niillä luodaan uudet kirjainperheet, jotka ovat käytännössä
samoja mutta ilman skaalausta.

Uusien kirjainperheiden komentojen nimiksi on valittu \koodi{\keno
  sf\-fam\-i\-ly\-abs} ja \koodi{\keno tt\-fam\-i\-ly\-abs} (vrt.
\koodi{\keno sf\-fam\-i\-ly} ja \koodi{\keno tt\-fam\-i\-ly}, taulukko
\ref{tlk:fonttimallikomennot}), ja näillä komennoilla kirjainperheet
kytketään päälle. Jos esimerkiksi jonkin julkaisun vaatimuksiin kuuluu,
että otsikossa täytyy olla 16 pisteen lihavoitu TeX Gyre Heros
\=/kirjainleikkaus, voi esimerkissä \ref{esim:fontti_absoluuttinen}
olevien asetusten pohjalta antaa otsikolle seuraavat komennot:

\begin{koodilohkosis}
  \sffamilyabs\fontsize{16bp}{18bp}\bfseries
\end{koodilohkosis}

Esimerkin \ref{esim:fontti_absoluuttinen} riveillä 16--20 määritellään
uudelleen Latexin korkean tason komennot, joilla fonttikoot asetetaan.
Oletus\-arvot tulevat dokumenttiluokasta (luku
\ref{luku:dokumenttiluokat}), mutta jos ne eivät ole sopivia, täytyy
vähintäänkin määritellä komento \koodi{\keno normal\-size} mutta sen
lisäksi kaikki ne koot, joita omassa dokumentissa tarvitaan. Tässä
esimerkissä normaali koko asetetaan 14 pisteen kokoiseksi.

Jokaiselle fonttikoolle määritetään riveillä 16--20 myös oma
rivikorkeus, ja se on tarkoitus asettaa sopivaksi juuri kyseiselle
koolle. Rivikorkeuteen vaikuttaa myös kerroin \koodi{\keno
  baselinestretch}, joka asetetaan komennolla \koodi{\keno linespread}.
Sitä ei välttämättä tarvitse käyttää, koska kirjainperheitä ei ole
skaalattu ja koska rivikorkeus asetetaan aina \koodi{\keno
  fontsize}\-/komennolla. \koodi{\keno linespread} on kuitenkin kätevä
komento rivikorkeuden säätämiseen yleisesti kaikkialla.

Fonttikokojen määrittelyn lopuksi rivillä 21 suoritetaan komento
\koodi{\keno normal\-size}, jotta se tulee heti voimaan. Dokumentin
esittelyosassa voidaan käyttää fonttikokoon viittaavia mittoja
\koodi{em} ja \koodi{ex}, ja ne viittaavat nyt tähän kokoon.
\koodi{\keno normal\-size}\-/komento suoritetaan kyllä myöhemmin
automaattisesti dokumentin tekstiosan eli \koodi{document}\-/ympäristön
alussa.

Edellä kuvatun absoluuttisen koonmääritystavan etuna on se, että
kirjoittaja hallitsee fonttien kokoa ja rivikorkeuksia tarkasti ja että
julkaisuun saadaan juuri ne mitat, jotka halutaan tai vaaditaan. Tapa on
myös teknisesti eheä eli toimii Latexin sisäisen logiikan näkökulmasta
oikein. Haittana voi pitää sitä, että kaikki koot täytyy määritellä
erikseen.

\subsection{Typografiset ligatuurit}

Typografiset ligatuurit ovat fontissa olevia yhdistelmämerkkejä, joissa
on typografisista syitä yhdistetty kaksi tai useampia kirjaimia yhteen
merkkiin.%
\footnote{Typografisten ligatuurien lisäksi on olemassa myös
  luonnollisten kielten ligatuureja, jotka muodostavat kieleen kuuluvan
  kirjaimen, kuten æ norjan kielessä. Niillä on jokin luonnolliseen
  kieleen liittyvä merkitys, eikä eri merkkejä ei ole yhdistetty
  typografisista syistä.} Tällaisia ligatuureja käytettiin jo
metalliladonnassa, eli samassa metallikirjakkeessa saattoi olla enemmän
kuin yksi kirjain.

Typografisten ligatuurien tarkoituksena on tuottaa tyylikkäämpi
lopputulos kuin saataisiin erillisten kirjainten avulla. Syynä on
esimerkiksi se, että erilliset peräkkäiset kirjaimet eivät ole aina
keskenään yhteensopivia. Kirjainten välistys voi olla ongelmallista:
sopivalle etäisyydelle asetettaessa kirjainten osat voivat mennä
rumannäköisesti päällekkäin. Riippuu fontista, mitkä ligatuurit ovat
tarpeellisia ja mitkä ligatuurimerkit on ylipäätään toteutettu fontin
merkistöön. Tavallisia antiikvafonttien ligatuureja ovat fi, ff, ffi, fl
ja ffl, mutta jotkin fontit sisältävät muitakin. Kuvaan
\ref{kuva:ligatuurit} on koottu erilaisia ligatuureja.

\leijukuva{
  \addfontfeatures{Scale=3.5, Ligatures={Common, Historic}}
  fi ff ffi fl ffl Th fb st ct
}{
  \caption{Tavalliset eli standardit f\=/alkuiset ligatuurit, vähän
    harvinaisemmat Th ja fb sekä erikseen päälle kytkettävät
    historialliset ligatuurit st ja ct}
  \label{kuva:ligatuurit}
}

Latex hoitaa tavallisten typografisten ligatuurien latomisen
automaattisesti, eli lähdedokumenttiin ei kannata kirjoittaa
Unicode\-/merkistön typografisia ligatuurimerkkejä (esimerkiksi
\uctunnus{u+fb01 latin small ligature fi}) vaan ihan tavallisia
erillisiä kirjaimia. Open Type \=/fontin suunnittelija on päättänyt
meidän puolestamme, mitkä kir\-jain\-yh\-dis\-tel\-mät on parasta latoa
ligatuurin avulla, ja ole\-tus\-ase\-tuk\-sil\-la Latex noudattaa niitä
ohjeita.

Jos kuitenkin yksittäisen ligatuurin muodostumisen haluaa estää, voi
kirjainten väliin kirjoittaa komennon \koodi{\keno
  text\-comp\-word\-mark}, joka tekee näkymättömän, juuri tähän
tarkoitukseen olevan merkin \uctunnus{u+200c zero width non-joiner}.

\pagebreak[3]

\begin{koodilohkosis}
  fi f\textcompwordmark i
\end{koodilohkosis}

\begin{tulossis}
  fi f\textcompwordmark i
\end{tulossis}

Mikäli tavallisia ligatuureja ei halua käyttöön lainkaan, on parasta
valita jo kirjainperheen tai \=/leikkauksen käyttöönotossa asetus
\koodi{Liga\-tures=No\-Com\-mon}. Väliaikaisesti fontin asetuksiin voi
vaikuttaa komennolla \koodi{\keno add\-font\-fea\-tures}, joka sekin on
\paketti{fontspec}\-/pakettiin sisältyvä komento.

\begin{koodilohkosis}
  \setmainfont{…}[Ligatures=NoCommon] % Kirjainperheen yleisasetus.
  {\addfontfeatures{Ligatures=NoCommon} fi fl} % Väliaikaisesti.
\end{koodilohkosis}

Tavallisten ligatuurien lisäksi Open Type \=/fontit voivat sisältää myös
harvinaisempia ligatuureja, jotka täytyy erikseen kytkeä päälle. Niiden
tarkoituksena on esimerkiksi erityinen koristeellisuus tai
historiallisen kirjoitustavan jäljittely. Harvinaisia ligatuureja ei ole
tarkoitus käyttää joka tilanteessa vaan ainoastaan erityisestä syystä.
Kuvan \ref{kuva:ligatuurit} st- ja ct\-/ligatuurit on saatu fontin
asetuksella \koodi{Liga\-tures=His\-toric}. Muita
li\-ga\-tuu\-ri\-ase\-tuk\-sia kannattaa tutkia
\paketti{fontspec}\-/paketin ohjekirjasta.

\subsection{Fonttivinkkejä}

\section{Kieli}
\label{luku:kieliasetukset}

\subsection{Polyglossia}
\subsection{Babel}
