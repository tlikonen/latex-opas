% Tekijä:   Teemu Likonen <tlikonen@iki.fi>
% Lisenssi: Creative Commons Nimeä-JaaSamoin 4.0 Kansainvälinen (CC BY-SA 4.0)
%           https://creativecommons.org/licenses/by-sa/4.0/legalcode.fi

\chapter{Dokumentin rakenne}

...

\section{Tekstikappaleet}
\label{luku:kappale}

Tekstikappale on tekstin osa, jonka pitäisi käsitellä suunnilleen yhtä
asiakokonaisuutta. Se voi olla esimerkiksi yksi aihe, näkökulma,
ajankohta tai henkilö. Seuraava kappale käsittelee jotakin toista
aihetta, näkökulmaa tms. Kappaleen vaihtuminen on lukijalle merkki
siitä, että tekstin sisällössäkin jokin muuttuu.

Latexin lähdetiedostoissa kappaleen vaihtuminen ilmaistaan
kirjoittamalla kappaleiden väliin vähintään yksi tyhjä rivi. Tätä
merkintäkielen piirrettä käsitellään myös luvussa
\ref{luku:kappaleen_vaihtuminen}. Kappale vaihtuu myös komennolla
\koodi{\keno par}, joka sopii käytettäväksi esimerkiksi komentojen
määrittelyssä (luku \ref{luku:komennot}), kun halutaan varmistaa
kappaleen vaihtuminen tietyssä kohdassa.

Ladotuissa teksteissä kuten kirjoissa ja lehdissä kappaleen vaihtuminen
ilmaistaan melkein aina siten, että uuden kappaleen ensimmäinen rivi
sisennetään hieman. Niin on tässäkin oppaassa. Toisinaan tekstikappaleet
erotetaan pystysuuntaisella välillä, ja silloin kappaleiden ensimmäistä
riviä ei sisennetä. Kappaleiden välejä, sisennyksiä, rivien tasaamista
ja muita asetuksia käsitellään seuraavissa alaluvuissa.

Monissa kappaleisiin liittyvissä asetuksissa tarvitaan Texin mittoja ja
mittayksiköitä. Mittoihin liittyvää tekniikkaa käsitellään tarkemmin
luvussa \ref{luku:mitat}, joka on syytä tuntea ennen tämän alaluvun
lukemista.

\subsection{Tasaaminen ja palstan muoto}
\label{luku:kappaleen_tasaus}

Tekstikappaleet tasataan oletuksena palstan molempiin reunoihin
(tasapalsta). Se tarkoittaa samalla sitä, että rivillä olevia sanavälejä
venytetään sopivasti, jotta jokainen rivi näyttäisi yhtä pitkältä ja
palstan molemmat reunat tasaiselta.

Käytännössä sanavälien venymiselle on määritelty yläraja, jonka yli
niitä ei venytetä. Ylärajan tarkoituksena on estää liian suuret ja rumat
sanavälit. Rajoitus on sinänsä järkevä, mutta se voi myös johtaa siihen,
että Tex ei saa tasattua kaikkia tekstikappaleita palstan oikeasta
reunasta: jotkin rivit yltävät palstan reunan yli; jotkin rivit jäävät
vajaaksi. Näin käy usein varsinkin suomen kielessä, jonka sanat ovat
usein pitkiä ja riveillä on vähänlaisesti sanavälejä. Suomen kielessä
sanavälien venymisen yläraja on usein tarpeellista asettaa oletusarvoa
suuremmaksi. Se tehdään mitan \koodi{\keno emergencystretch} avulla,
esimerkiksi seuraavasti:

\begin{koodilohkosis}
  \setlength{\emergencystretch}{1em}
\end{koodilohkosis}

Kaikenlaiset kappaleiden latomiseen liittyvät tekniset rajoitukset voi
poistaa tai asettaa hyvin suuriksi komennolla \koodi{\keno sloppy}.
\koodimargin{\keno sloppy} Komento asettaa muun muassa sanavälien
venymisen ylärajaksi 3\,em. Tämän komennon käyttö ei ole kovin
suositeltavaa, koska sillä on muitakin seurauksia ja se voi vaikuttaa
myös sellaisiin kappaleisiin, jotka muuten saataisiin ladottua nätisti.
Parempi on asettaa vain mitta \koodi{\keno emergencystretch} riittävän
suureksi. \koodimargin{\keno fussy} Sanavälien venymiseen ja kappaleiden
tasaiseen latomiseen liittyvät asetukset voi palauttaa oletusarvoihin
komennolla \koodi{\keno fussy}.

Hyvin tavallista on tasata teksti pelkästään vasempaan reunaan, jolloin
rivien pituudet vaihtelevat ja oikealla on niin sanottu liehureuna.
Oikea liehureuna sopii pitkiin teksteihin yhtä hyvin kuin tasapalstakin,
mutta se on parempi valinta erityisesti silloin, kun palsta on kapea.
Nimittäin kapealla palstalla venyviä sanavälejä on käytettävissä hyvin
vähän ja oikean reunan tasaaminen vaatii sanavälien venyttämistä joskus
kohtuuttoman paljon. Tekstiin jää rumia aukkoja.

\providecommand{\rivi}{}
\renewcommand{\rivi}[3]{\koodi{\keno #1} & \koodi{#2} & #3 \\}

\leijutlk{
  \begin{tabular}{lll}
    \toprule
    \ots{Komento} & \ots{Ympäristö} & \ots{Merkitys} \\
    \midrule
    \rivi{raggedright}{flushleft}{vasen tasaus, oikea liehu}
    \rivi{raggedleft}{flushright}{oikea tasaus, vasen liehu}
    \rivi{centering}{center}{keskitetty}
    \midrule
    \rivi{RaggedRight}{FlushLeft}
    {vasen tasaus, oikea liehu, tavutus (\paketti{ragged2e})}
    \rivi{RaggedLeft}{FlushRight}
    {oikea tasaus, vasen liehu, tavutus (\paketti{ragged2e})}
    \rivi{Centering}{Center}{keskitetty, tavutus (\paketti{ragged2e})}
    \rivi{justifying}{justify}{tasapalsta, tavutus (\paketti{ragged2e})}
    \bottomrule
  \end{tabular}
}{
  \caption{Tekstikappaleen tasaamiseen ja palstan muotoon vaikuttavat
    komennot ja ympäristöt. Osa sisältyy \paketti{ragged2e}\-/pakettiin}
  \label{tlk:kappaleen_tasauskomennot}
}

Kappaleiden tasaamiseen ja palstan muotoon vaikuttavia komentoja ja
ympäristöjä on koottu taulukkoon \ref{tlk:kappaleen_tasauskomennot}.
Taulukossa on mainittu ensin Latexin omat komennot ja sitten
\paketti{ragged2e}\-/paketin\avctan{ragged2e} vastaavat. Latexin omat
komennot estävät sanojen tavuttamisen, kun taas \paketti{ragged2e}\-/
paketin komennot sallivat tavutuksen normaalisti.

\subsection{Pystysuuntaiset välit}

Kappaleiden väliin ladottava pystysuuntainen tyhjä tila asetetaan mitan
\koodi{\keno par\-skip} \koodimargin{\keno par\-skip} avulla. Se on
oletuksena nolla, mutta pientä venymistä kuitenkin sallitaan, eli
joissakin tilanteissa kappaleiden väliin voidaan latoa pieni tyhjä tila.
Jos tyhjää tilaa ei haluta missään tilanteessa, asetetaan mitta vain
nollaksi:

\begin{koodilohkosis}
  \setlength{\parskip}{0ex}
\end{koodilohkosis}

Seuraava esimerkkikomento asettaa kappaleväliksi 1,3\,ex. Lisäksi se
sallii kappalevälin venyä 0,2\,ex:n verran tai kutistua 0,1\,ex:n
verran.

\begin{koodilohkosis}
  \setlength{\parskip}{1.3ex plus .2ex minus .1ex}
\end{koodilohkosis}

Silloin kun kappaleet ladotaan erilleen toisistaan, on yleensä hyvä
sallia kappalevälin venyä tai kutistua hieman, koska venyvät
pystysuuntaiset välit antavat Texille paremmat mahdollisuudet latoa
hyvännäköisiä sivuja. Venyvien välien avulla esimerkiksi sivun
tekstialueen ylä- ja alareunat saadaan aina samalle kohdalle. Toisaalta
myös liian suuret ja toisistaan liiaksi poikkeavat kappalevälit voivat
olla rumannäköisiä.

Tavallista kappaleväliä suurempien pystysuuntaisten välien tekemiseen on
olemassa kolme valmista komentoa: \koodimargin{\keno bigskip}
\koodimargin{\keno medskip} \koodimargin{\keno smallskip} suuremmasta
pienempään ne ovat \koodi{\keno bigskip}, \koodi{\keno medskip} ja
\koodi{\keno smallskip}. Ne sopivat käytettäväksi yksittäisiin
tilainteisiin, joissa normaali kappaleväli on liian vähän. Myös
komentojen tai ympäristöjen määrittelyssä niistä voi olla apua (luvut
\ref{luku:komennot} ja \ref{luku:ymparistot}). Jos sivunvaihto osuu
näiden komentojen kohdalle, mitään väliä ei ladota sivun loppuun eikä
seuraavan alkuun.

Edellä mainittujen komentojen latoman välin suuruuteen voi vaikuttaa
mittojen \koodi{\keno big\-skip\-amount}, \koodi{\keno
  med\-skip\-amount} ja \koodi{\keno small\-skip\-amount} avulla.
Seuraavassa on esimerkkikomennot mittojen määrittelemiseen ja samalla
niiden oletusarvot:

\begin{koodilohkosis}
  \setlength{\bigskipamount} {12bp plus 4bp minus 4bp}
  \setlength{\medskipamount}  {6bp plus 2bp minus 2bp}
  \setlength{\smallskipamount}{3bp plus 1bp minus 1bp}
\end{koodilohkosis}

Komentojen \koodi{\keno bigskip}, \koodi{\keno medskip} ja \koodi{\keno
  smallskip} sijasta voi käyttää myös komentoja \koodi{\keno bigbreak},
\koodi{\keno medbreak} tai \koodi{\keno smallbreak}. \koodimargin{\keno
  bigbreak} \koodimargin{\keno medbreak} \koodimargin{\keno smallbreak}
Nämä toimivat lähes samalla tavalla, mutta niihin sisältyy myös
sivunvaihtovihje. Toisin sanoen ne vaikuttavat ladonta\-/algoritmiin
siten, että komennon kohdalla todennäköisyys sivun vaihtumiselle kasvaa
suhteessa muihin kohtiin. Sivu voi edelleen vaihtua muustakin kohdasta,
jos algoritmi löytää omasta mielestään vielä paremman paikan.

Pystysuuntaisten välien yleiskomento on \koodi{\keno vspace},
\koodimargin{\keno vspace} \koodimargin{\keno vspace*} jolle annetaan
argumentiksi välin suuruus ja mahdolliset venymisen rajat. Tämäkin
komento jättää välin latomatta, jos se sattuu sivunvaihdon kohdalle. Sen
sijaan tähdellinen versio \koodi{\keno vspace*} latoo välin joka
tapauksessa, vaikka se olisi sivun lopussa tai alussa.

\begin{koodilohkosis}
  Tekstikappale.
  \vspace{5ex plus 1ex minus .5ex}

  Toinen tekstikappale.
\end{koodilohkosis}

Komento \koodi{\keno addvspace} \koodimargin{\keno addvspace} toimii
lähes samoin kuin \koodi{\keno vspace}, mutta se huomioi mahdolliset
peräkkäiset \koodi{\keno addvspace}\-/komennot ja varmistaa, että vain
suurin väli toteutuu. Jos siis useita \koodi{\keno
  addvspace}\-/komentoja sattuu peräkkäin, niiden määrittämiä välejä ei
ladota peräkkäin vaan ainoastaan suurin niistä ladotaan. Seuraava
esimerkki latoo kappaleiden väliin 2\,ex:n suuruisen pystysuuntaisen
välin:

\begin{koodilohkosis}
  Tekstikappale.

  \addvspace{1ex} \addvspace{2ex} \addvspace{.5ex}
  Toinen tekstikappale.
\end{koodilohkosis}

Jos edellisessä esimerkissä olisi käytetty \koodi{\keno
  vspace}\-/komentoa, pystysuuntaisen välin suuruus olisi 3,5\,ex, joka
on välien yhteenlaskettu suuruus.

\koodi{\keno addvspace}\-/komento soveltuu hyvin komentojen ja
ympäristöjen määrittelyyn (luvut \ref{luku:komennot} ja
\ref{luku:ymparistot}). Esimerkiksi itse määritellyn ympäristön alussa
ja lopussa voi \koodi{\keno addvspace}\-/komennolla varmistaa
tietynsuuruisen välin, mutta jos sama tai muu vastaava ympäristö on
dokumentissa kahdesti peräkkäin, huomioidaan pystysuuntainen väli vain
kerran eli suurimman välin mukaan. Jotkin Latexin valmiit ympäristöt
tekevät juuri näin eli käyttävät \koodi{\keno addvspace}\-/komentoa
välien asettamiseen.

Sivun alueella äärettömästi venyvän pystysuuntaisen välin saa komennolla
\koodi{\keno vfill}. \koodimargin{\keno vfill} Mitan luonnollinen arvo
on nolla, mutta se voi venyä niin, että se täyttää kaiken tyhjän tilan
sivulla. \koodi{\keno vfill}\-/komento tarkoittaa käytännössä samaa kuin
\koodi{\keno vspace\{0mm plus 1fill\}} \=/komento. Texin venyviä mittoja
ja välejä käsitellään tarkemmin luvussa \ref{luku:venyvat_mitat}.

\subsection{Ensimmäisen rivin sisennys}

Kirjojen ja lehtien typografiassa kappaleen ensimmäinen rivi on tapana
sisentää merkiksi siitä, että alkaa uusi kappale. Sisennys on lukijalle
merkki siitä, että tekstin sisällössä siirrytään seuraavaan asiaan.
Oletusasetuksilla Latex latoo sisennyksen automaattisesti kappaleen
alkuun -- paitsi otsikoiden jälkeen.

Ensimmäisen rivin sisennyksen suuruus asetetaan mitan \koodi{\keno
  parindent} avulla, esimerkiksi alla olevan esimerkin mukaisesti.
Sopiva mittayksikkö tähän tarkoitukseen on \emph{em}, koska se viittaa
suoraan nykyisen fontin kokoon.

\begin{koodilohkosis}
  \setlength{\parindent}{1em}
\end{koodilohkosis}

Edellä mainittu mitta pitäisi asettaa nollaan silloin, kun kappaleiden
välissä on tyhjää tilaa. Pystysuuntainen välihän jo sinänsä ilmaisee,
että kappale vaihtuu.

\begin{koodilohkosis}
  \setlength{\parskip}{1.3ex plus .2ex minus .1ex}
  \setlength{\parindent}{0em}  % Ei sisennystä.
\end{koodilohkosis}

\koodi{\keno parindent}\-/ mitan levyisen välin voi tehdä mihin tahansa
komennolla \koodi{\keno indent}. \koodimargin{\keno indent} Tätä
komentoa ei tavallisesti tarvita, koska kappaleet alkavat
automaattisesti sen suuruisella sisennyksellä. Tarpeellisempi komento on
\koodi{\keno no\-in\-dent}, \koodimargin{\keno noindent} joka voidaan
kirjoittaa kappaleen alkuun estämään kyseisen kappaleen ensimmäisen
rivin sisentäminen.

\begin{koodilohkosis}
  \noindent
  Tämän tekstikappaleen ensimmäistä riviä ei sisennetä.
\end{koodilohkosis}

Suomenkielisissä julkaisuissa on tavallista, että leipätekstin
kappaleessa ei ole sisennystä, jos sitä ennen on pystysuuntainen väli.
Tällainen tilanne on aina otsikoiden jälkeen mutta myös kokonaan
sisennetyn tekstikappaleen jälkeen tai kuvan, taulukon, luetelman tai
muun vastaavan elementin jälkeen. Esimerkiksi tässä oppaassa Latex\-/
koodi\-esi\-merk\-kien jälkeen ei tekstikappaleissa ole sisennystä.
Tähän käytäntöön on joskus poikkeuksia suomenkielisessäkin
typografiassa, mutta eri kielten välillä käytäntö voi vaihdella
enemmänkin.

Latex estää sisennyksen automaattisesti otsikoiden jälkeen mutta latoo
sisennyksen kuitenkin kaikkien muiden elementtien ja pystysuuntaisen
välin jälkeen. Jos sisennys halutaan estää, pitäisi kyseiset kappaleet
aloittaa aina \koodi{\keno noindent}\-/komennolla. Toinen vaihtoehto on
käyttää \paketti{no\-indent\-after}\-/ pakettia\avctan{noindentafter} ja
määritellä sen tarjoaman komennon avulla, minkä ympäristöjen jälkeen ei
haluta sisennystä. Seuraava esimerkki poistaa sisennyksen aina
\koodi{list}- ja \koodi{tabular}\-/ ympäristöjen jälkeen. Lisätietoja
mainituista ympäristöistä on luvuissa \ref{luku:luetelmat} ja
\ref{luku:taulukot}.

\begin{koodilohkosis}
  \NoIndentAfterEnv{list}
  \NoIndentAfterEnv{tabular}
\end{koodilohkosis}

\subsection{Riippuva sisennys}

Riippuva sisennys tarkoittaa tekstikappaleen muotoa, jossa sisennetään
kappaleen muita rivejä mutta ei ensimmäistä. Riippuvaa sisennystä
käytetään esimerkiksi kirjallisuus\-/{} ja lähdeluetteloissa, joissa on
tarpeellista saada henkilön nimi tai muu lähdemerkinnän hakusana
erottumaan selvästi vasemmassa reunassa. Tämän oppaan sivulla
\pageref{luku:kirjallisuutta} on esimerkki lähdemerkinnöistä.

Myös virallisten asiakirjojen muotoilussa käytetään riippuvaa
sisennystä. Niissä kappaleen ensimmäinen rivi voi sisältää otsikon, joka
on tasattu vasempaan marginaaliin. Otsikon perässä on sarkainhyppy
tekstikappaleen sisennyksen tasalle, ja kappaleen muut rivit on
sisennettynä samalla tasolle.

\begin{esimerkki*}
\begin{koodilohko}
  \hangpara{2cm}{1}Tässä tekstikappaleessa on riippuva sisennys. Kappale
  alkaa yhdellä sisentämättömällä rivillä, ja kappaleen seuraavat rivit
  on sisennetty 2\,cm. Ei ole kovin vaikeaa.
\end{koodilohko}
\begin{tulos}
  \hangpara{2cm}{1}Tässä tekstikappaleessa on riippuva sisennys. Kappale
  alkaa yhdellä sisentämättömällä rivillä, ja kappaleen seuraavat rivit
  on sisennetty 2\,cm. Ei ole kovin vaikeaa.
\end{tulos}
\caption{Riippuva sisennys \paketti{hanging}\-/paketin ja sen
  \koodi{\keno hang\-para}\-/komennon avulla}
\label{esim:riippuva_sis_hangpara}
\end{esimerkki*}

Helpoin tapa riippuvien sisennysten toteuttamiseen lienee
\paketti{hang\-ing}\-/ paketin\avctan{hanging} käyttö. Paketti tuo uuden
komennon \koodi{\keno hang\-para}, \koodimargin{\keno hangpara} jonka
käyttöä esimerkki \ref{esim:riippuva_sis_hangpara} selventää. Komennon
ensimmäinen argumentti on sisennyksen mitta ja toinen argumentti
määrittää, kuinka monta riviä jätetään sisentämättä. Jos toinen
argumentti on negatiivinen luku, luvun it\-seis\-arvo määrittää, kuinka
monta riviä kappaleen alusta sisennetään.

Komennon \koodi{\keno hang\-para} vaihtoehtona on ympäristö
\koodi{hang\-paras}, jonka sisällä kaikki kappaleet sisennetään
riippuvalla tyylillä samojen asetusten mukaisesti. Ympäristölle annetaan
samat argumentit kuin komennollekin.

\begin{koodilohkosis}
  \begin{hangparas}{2cm}{1}
    ...
  \end{hangparas}
\end{koodilohkosis}

\begin{esimerkki*}
\begin{koodilohko}
  \hangpara{2cm}{1}\makebox[2cm][l]{Otsikko}Tässä tekstikappaleessa on
  riippuva sisennys. Kappale alkaa yhdellä sisentämättömällä rivillä,
  joka sisältää näkymättömässä laatikossa olevan otsikon. Kappaleen muut
  rivit on sisennetty 2\,cm.
\end{koodilohko}
\begin{tulos}
  \hangpara{2cm}{1}\makebox[2cm][l]{Otsikko}Tässä tekstikappaleessa on
  riippuva sisennys. Kappale alkaa yhdellä sisentämättömällä rivillä,
  joka sisältää näkymättömässä laatikossa olevan otsikon. Kappaleen muut
  rivit on sisennetty 2\,cm.
\end{tulos}
\caption{Asiakirjan tyylisten tekstikappaleiden toteutus}
\label{esim:riippuva_sis_asiakirja}
\end{esimerkki*}

Asiakirjan tyylisen otsikon saa toteutettua \koodi{\keno make\-box}\-/
komennon avulla esimerkin \ref{esim:riippuva_sis_asiakirja} tavoin.
Näkymätön laatikko määritellään sisennyksen levyiseksi ja sen sisään
kirjoitetaan otsikko. Jos asiakirjatyylisiä tekstikappaleita tarvitaan
useita, kannattaa määritellä sarkainleveyttä ja sisennystä varten oma
mitta ja tekstikappaleen kirjoittamista varten oma komento. Seuraavassa
on siitä esimerkki:

\begin{koodilohkosis}
  \newlength{\sarkain}
  \setlength{\sarkain}{2.3cm}
  \newcommand{\kappale}[1][]{\par\hangpara{2\sarkain}{1}%
    \makebox[2\sarkain][l]{\ignorespaces #1}\ignorespaces}
\end{koodilohkosis}

Tämän jälkeen voi komennolla \koodi{\keno kappale} aloittaa asiakirjan
sisennetyn tekstikappaleen. Komennolle voi antaa hakasulkeissa
valinnaisen argumentin, joka on kappaleen otsikko. \koodi{\keno
  make\-box}\-/ komentoa ja muita laatikoita käsitellään tarkemmin
luvussa \ref{luku:laatikot}.

\begin{esimerkki*}
\begin{koodilohko}
  \begin{list}{}{
      \setlength{\leftmargin}{2cm}
      \setlength{\itemindent}{-2cm}
    }
  \item Tässä tekstikappaleessa on riippuva sisennys. Kappale alkaa
    yhdellä sisentämättömällä rivillä, ja kappaleen muut rivit on
    sisennetty 2\,cm.
  \end{list}
\end{koodilohko}
\caption{Riippuvan sisennyksen toteuttaminen \koodi{list}\-/ympäristön
  avulla}
\label{esim:riippuva_sis_list}
\end{esimerkki*}

Riippuvan sisennyksen voi toteuttaa myös \koodi{list}\-/ympäristön
avulla. Se on tarkoitettu luetelmien tekemiseen, mutta sopivilla
asetuksilla yksi ''luetelman'' kohta on riippuvasti sisennetty kappale.
Tarkemmin \koodi{list}\-/ympäristöä käsitellään luetelmien yhteydessä
luvussa \ref{luku:luetelmat}, mutta oheisessa esimerkissä
\ref{esim:riippuva_sis_list} on sopivat asetukset riippuvan sisennyksen
toteuttamiseen. Kappale alkaa \koodi{\keno item}\-/komennolla, koska
kyseessä on ikään kuin luetelman kohta.

\subsection{Vasen ja oikea sisennys}

Koko tekstikappaleen tai pidemmän tekstin sisennys vasemmasta tai
oikeasta reunasta voidaan toteuttaa luetelmien (luku
\ref{luku:luetelmat}) tekemiseen tarkoitetun \koodi{list}\-/ympäristön
avulla. Sopivilla asetuksilla ''luetelma'' sisältää ihan tavallisen
näköisiä tekstikappaleita, jotka vain on sisennetty vasemmalta tai
oikealta tai molemmista reunoista.

\begin{esimerkki*}
\begin{koodilohko}
  \begin{list}{}{
      \setlength{\leftmargin}{1cm}
      \setlength{\rightmargin}{1cm}
      \setlength{\itemindent}{0bp}
      \setlength{\listparindent}{\parindent}
      \setlength{\parsep}{\parskip}
      \setlength{\topsep}{1em}
      \setlength{\partopsep}{0bp}
    }
  \item Tämä tekstikappale on sisennetty 1\,cm vasemmalta ja oikealta.
    Muuten tämä sisältää suunnilleen samat asetukset kuin dokumentin
    leipätekstin kappaleet.
  \end{list}
\end{koodilohko}
\caption{Kappaleen vasemman ja oikean sisennyksen toteutus
  \koodi{list}\-/ ympäristön avulla}
\label{esim:vasen_oikea_sisennys}
\end{esimerkki*}

Esimerkistä \ref{esim:vasen_oikea_sisennys} selviää, kuinka
\koodi{list}\-/ ympäristöä voi käyttää sisennyksen toteuttamiseen.
Sisennetyn jakson alussa pitää olla \koodi{\keno item}\-/komento, koska
sillä aloitetaan \koodi{list}\-/ympäristössä luetelman kohta. Sen
jälkeen kappaleet voi erottaa toisistaan kuten tavallisestikin eli
tyhjällä rivillä. Tällaista kappaleen sisennystä voidaan tarvita
esimerkiksi lohkolainauksissa, joita käsitellään luvussa
\ref{luku:lohkolainaukset}.

\subsection{Rivinvaihto}

...

% \newline \\ \\*
%

\subsection{Lesket ja orvot}

% nowidow-paketti, \clubpenalty, \widowpenalty
% https://tex.stackexchange.com/questions/4152/how-do-i-prevent-widow-orphan-lines

...

\subsection{Marginaalihuomautukset}
\label{luku:marginaalihuomautukset}

...

\subsection{Anfangi}

% lettrine- tms. paketti

...

\section{Tekstin korostaminen}
\label{luku:korostus}

% Katso \ref{luku:fontit_muut}: tietoa harvennuksesta.

...

\section{Sivun vaihto ja tasaaminen}

...

% newpage, clearpage, minipage, nopagebreak
% \flushbottom \raggedbottom -komennot liittyvät sivun latomiseen

\section{Otsikot ja jäsennys}
\label{luku:otsikot}

% \sectionbreak ym. ovat titlesec-paketin ominaisuuksia. titlesec
% kannattaa täällä käsitellä.
%
% Varoitus: Ei erikoisia komentoja otsikoihin (mm. extdash), koska ne
% eivät toimi ainakaan pdf:n sisällysluettelossa tai ehkä muutenkaan.
% Voi käyttää otsikkokomennon valinnaista argumenttia.

...

\subsection{Kansilehti ja dokumentin perustiedot}
\label{luku:kansilehti}

...

% titlepage, \title, \author, \date, abstract

\subsection{Esittely, pääluvut ja liitteet}
\label{luku:frontmainbackmatter}
% \frontmatter, \mainmatter, \backmatter, \appendix

% Alussa käytetään komentoa \koodi{\keno frontmatter}, joka asettaa
% sivunumeroiden tyyliksi roomalaiset numerot (i, ii, iii jne.). Tässä
% osassa ovat ainakin sisällysluettelo ja tietokirjan tai tutkimuksen
% tiivistelmä. Varsinainen sisältö aloitetaan komennolla \koodi{\keno
% mainmatter}. \backmatter lopettaa päälukujen numeroinnin.

...

\section{Luetelmat}
\label{luku:luetelmat}

...

\section{Taulukot}
\label{luku:taulukot}

...

\section{Lohkolainaukset}
\label{luku:lohkolainaukset}

...

\section{Leijuvat osat}
\label{luku:leijuosat}

...

\section{Ristiviitteet}
\label{luku:ristiviitteet}

...

\section{Alaviitteet}
\label{luku:alaviitteet}

% geometry: footnotesep

...

\section{Palstat}
\label{luku:palstat}

% Käsitellään Latexin omat ja multicol-paketti erikseen.

...

\section{Lähdeluettelo ja lähdeviitteet}
\label{luku:lähteet}

Samoin kuin ristiviitteissäkin (luku \ref{luku:ristiviitteet}) Latex
sisältää komennot, joilla lähdeluettelossa mainittuihin teoksiin voidaan
viitata muualta tekstistä. Ajatus on se, että lähdeluettelo laaditaan
tiettyjen komentojen avulla niin, että jokainen lähdeteos saa jonkin
yksilöllisen tunnisteen. Muualta tekstistä viitataan lähdeteoksiin
käyttämällä samoja tunnisteita, ja Latex osaa automaattisesti poimia
lähdeluettelosta esimerkiksi teoksen tekijöiden nimet ja vuosiluvun.

Lähdeviittauksiin ja lähdemerkintöihin on useita käytäntöjä, jotka
vaihtelevat eri ammatti- ja tieteen\-aloilla, oppilaitoksilla tai
julkaisijoilla. Tässä yhteydessä käsitellään melko vakiintuneita
suomalaisia käytäntöjä, jotka kuvataan \emph{Kielitoimiston
  oikein\-kir\-joi\-tus\-oppaas\-sa} \parencite{kt_oik}. Samalla
käsitellään joitakin asetuksia, joilla kukin voi muokata viittausten
ulkoasua omiin tarpeisiin sopivaksi.

Latex sisältää lähdeluetteloiden ja \=/viittausten perustoiminnot, mutta
niiden avulla ei saa yleisen suomalaisen käytännön mukaisia
lähdeviittauksia. Siksi käytämme apuna makropakettia, jolla viittausten
ja lähdeluettelon ulkoasuun voi vaikuttaa. Ensin käsiteltävä paketti
\paketti{natbib} (luku \ref{luku:natbib}) soveltuu perustarpeisiin ja
lienee sopivin valinta useimmille kirjoittajille. Laajoja tieteellisiä
teoksia kirjoittavan kannattanee opetella käyttämään monipuolista
\paketti{biblatex}\-/pakettia (luku \ref{luku:biblatex}) ja ylläpitää
yhteistä lähdeteosten tietokantaa, josta tarvittavat teokset poimitaan
kunkin dokumentin lähdeluetteloon automaattisesti.

\subsection{Peruskäyttöön (natbib)}
\label{luku:natbib}

Makropaketti \paketti{natbib}\avctan{natbib} laajentaa Latexin
lähdeviittausten perustoimintoja sen verran, että lähteisiin voidaan
viitata teoksen tekijöiden nimen ja vuosiluvun avulla. Seuraava
esimerkki havainnollistaa paketin käyttöönottoa ja asetuksia.

\begin{koodilohkosis}
  \usepackage{natbib}
  \setcitestyle{authoryear,aysep={},notesep={: }}
\end{koodilohkosis}

Edellisessä esimerkissä viittaustyyli valitaan \koodi{\keno
  set\-cite\-style}\-/komennon argumentissa valitsimella
\koodi{author\-year} (tekijä\--vuosi). Valitsimella \koodi{aysep}
määritetään, mikä välimerkki ladotaan tekijän nimen ja vuosiluvun
väliin. Tässä se jätetään tyhjäksi \koodi{\{\}}.
\koodi{note\-sep}\-/valitsimella asetetaan merkit, jotka ladotaan
vuosiluvun ja sitä seuraavan huomautuksen kuten sivunumeroiden väliin;
tässä tapauksessa määritettiin kaksoispiste ja väli \koodi{\{:~\}},
mutta pilkkukin on yleinnen käytäntö. \koodi{\keno
  set\-cite\-style}\-/komennon valitsimet erotetaan toisistaan pilkulla,
eikä erotinpilkkujen ympärillä saa olla välilyöntejä. Lopputuloksena
lähdemerkinnät näyttävät esimerkiksi seuraavanlaisilta:

% \pagebreak[3]

\begin{koodilohkosis}
  \citet*[27--29]{johdatus} % Viittaus teokseen ”johdatus”.
\end{koodilohkosis}

\begin{tulossis}
  Meikäläinen \& Teikäläinen (2020: 27--29)
\end{tulossis}

Lähdeluettelo kirjoitetaan \koodi{thebibliography}\-/ympäristön ja
\koodi{\keno bib\-item}\-/komentojen avulla esimerkin
\ref{esim:thebibliography} tavoin. Ympäristön aloittavan komennon
(rivi~1) yhteydessä on argumentti \koodi{00}, jolla ei ole tässä
yhteydessä merkitystä. Jos lähdeviittauksen tyylinä olisi
\koodi{numbers} (eikä \koodi{author\-year}), lähdeluettelon teokset
numeroitaisiin, ja silloin \koodi{thebibliography}\-/ympäristön
argumentti ilmaisee, kuinka leveän sisennyksen numeroidut teokset
tarvitsevat. Argumentiksi voi kirjoittaa mitä tahansa merkkejä, ja Latex
mittaa niiden leveyden. Kannattaa kirjoittaa leveitä numeroita kuten
nollia (\koodi{0}) niin monta kappaletta kuin on numeroita suurimmassa
lähdemerkinnän luvussa. Yksi nolla riittää, jos lähteitä on 1--9
kappaletta, kaksi jos lähteitä on kaksinumeroinen määrä eli 10--99
kappaletta jne.

\begin{esimerkki*}
\begin{koodilohko}
  \begin{thebibliography}{00}

  \bibitem[Meikäläinen ym.(2020)Meikäläinen \& Teikäläinen]{johdatus}
    Meikäläinen, Matti \& Teikäläinen, Teija (2020): Johdatus alkeiden
    perusteisiin. Toinen painos. Kustantaja Oy.

  \bibitem[Itkonen(2019)]{typografia} Itkonen, Markus (2019):
    Typografian käsikirja. Viides, tarkistettu painos. Typoteekki.
    Graafinen suunnittelu Markus Itkonen Oy.

  \end{thebibliography}
\end{koodilohko}
\caption{Lähdeluettelon kirjoittaminen
  \koodi{thebibliography}\-/ympäristön ja \koodi{\keno
    bib\-item}\-/komentojen avulla.}
\label{esim:thebibliography}
\end{esimerkki*}

Komennolla \koodi{\keno bib\-item} tehdään varsinaiset teosmerkinnät.
Samalla määritetään teoksen yksilöllinen tunniste ja mitä tietoja
lähdeviittauksissa näytetään. Yleinen muoto on seuraavanlainen:

\begin{koodilohkosis}
  \bibitem[lyhyt(vuosi)pitkä]{tunniste} Lähdeluettelon tekstit.
\end{koodilohkosis}

Valinnaisen argumentin aluksi kirjoitetaan lähdeviittauksen lyhyt
merkintä, joka tulisi näkymään lähdeviittauksissa esimerkiksi muodossa
''Meikäläinen ym.''. Heti sen perään kirjoitetaan sulkeissa teoksen
vuosiluku ja sen perään vapaavalintainen lähdeviittauksen pitkä
merkintä, joka näkyisi esimerkiksi tekstinä ''Meikäläinen \&
Teikäläinen''. Vuosiluvun sulkeiden ympärillä ei saa olla välilyöntejä.

Komennon pakollinen argumentti on kyseisen lähdeteoksen yksilöllinen
tunniste, jonka avulla kyseiseen teokseen viitataan. Komennon
argumenttien jälkeen kirjoitetaan samaan tekstikappaleeseen teksti, joka
tulee näkymään lähdeluettelossa.

Lähdeteoksiin viittaamiseen on useita eri komentoja, jotka eroavat
toisistaan siinä, mitä tietoa lähdeviittauksessa näytetään ja onko
lähdeviittaus tai sen osa sulkeissa vai ei. Taulukossa
\ref{tlk:natbib-cite} on joitakin \paketti{natbib}\-/paketin
viittauskomentoja sekä esimerkki viittauksen ulkoasusta. Kuviteltu
esimerkkiteos on peräisin esimerkistä \ref{esim:thebibliography}.

\providecommand{\rivi}{}
\renewcommand{\rivi}[2]{\koodi{\keno #1\{\ldots\}} & #2 \\}

\leijutlk{
  \begin{tabular}{ll}
    \toprule
    \ots{Komento} & \ots{Esimerkki} \\
    \midrule
    \rivi{citet}{Meikäläinen ym. (2020)}
    \rivi{citet*}{Meikäläinen \& Teikäläinen (2020)}
    \rivi{citep}{(Meikäläinen ym. 2020)}
    \rivi{citep*}{(Meikäläinen \& Teikäläinen 2020)}
    \rivi{citealt}{Meikäläinen ym. 2020}
    \rivi{citealt*}{Meikäläinen \& Teikäläinen 2020}
    \rivi{citeauthor}{Meikäläinen ym.}
    \rivi{citeauthor*}{Meikäläinen \& Teikäläinen}
    \rivi{citeyear}{2020}
    \rivi{citeyearpar}{(2020)}
    \bottomrule
  \end{tabular}
}{
  \caption{\paketti{natbib}\-/paketin lähdeviittauskomentoja}
  \label{tlk:natbib-cite}
}

Lähdeluettelon ulkoasuun voi vaikuttaa mittojen \koodi{\keno bibhang} ja
\koodi{\keno bibsep} avulla. Ensin mainittu on lähdemerkinnän
vaakasuuntaisen riippuvan sisennyksen suuruus, ja jälkimmäinen on
lähdemerkintöjen välinen pystysuuntainen tila. Mitat asetetaan
tavalliseen tapaan \koodi{\keno set\-length}\-/komennolla (luku
\ref{luku:mitat}):

\begin{koodilohkosis}
  \setlength{\parindent}{1.1em} % tekstikappaleiden 1. rivin sisennys
  \setlength{\bibhang}{\parindent}
  \setlength{\bibsep}{.5ex plus .1ex minus .1ex}
\end{koodilohkosis}

Lähdemerkintöjen fonttiin voi vaikuttaa määrittelemällä uudelleen
komennon \koodi{\keno bibfont} ja sijoittamalla halutut fontti- tai muut
komennot kyseisen komennon määritelmään.

\begin{koodilohkosis}
  \renewcommand{\bibfont}{\sffamily\small}
\end{koodilohkosis}

Oletuksena \koodi{thebibliography}\-/ympäristö latoo lähdeluettelolle
otsikon, ja otsikon teksti määräytyy kieli\-ase\-tus\-ten (luku
\ref{luku:kieliasetukset}) ja dokumenttiluokan perusteella (luku
\ref{luku:dokumenttiluokat}). Suomenkielisen lähdeluettelon otsikon voi
määrittää dokumentin esittelyosassa seuraavan esimerkin tavoin.
Esimerkissä hyödynnetään \koodi{\keno add\-to}\-/komentoa, joka sisältyy
\paketti{polyglossia}\-/{} ja \paketti{babel}\-/paketteihin.

\begin{koodilohkosis}
  \addto{\captionsfinnish}{%
    \renewcommand{\refname}{Lähteet} % article-dokumenttiluokka
    \renewcommand{\bibname}{Lähteet} % report- ja book-luokat
  }
\end{koodilohkosis}

On myös mahdollista määritellä koko komentosarja, joka suoritetaan
lähdeluettelon otsikoinnin yhteydessä. Se tehdään määrittelemällä
uudelleen komento \koodi{\keno bibsection}.

\begin{koodilohkosis}
  \renewcommand{\bibsection}{%
    \setcounter{secnumdepth}{-1}
    \section{Lähteet}
  }
\end{koodilohkosis}

Edellisessä esimerkissä komennolla \koodi{\keno set\-counter}
määritetään, mille otsikkotasolle dokumentin otsikoiden eli lukujen
numerointi yltää. Pieni arvo \mbox{(\koodi{-1})} käytännössä tarkoittaa,
että seuraaviin otsikoihin ei tule numerointia; lähdeluettelon otsikkoon
ei numerointia välttämättä haluta. Komento \koodi{\keno section} tekee
itse otsikon.

Jos ei halua, että \koodi{thebibliography}\-/ympäristö tekee otsikon
automaattisesti, voi \koodi{\keno bibsection}\-/komennon määrittää
tyhjäksi.

\begin{koodilohkosis}
  \renewcommand{\bibsection}{}
\end{koodilohkosis}

Tässä alaluvussa on käsitelty lähdeluettelon ja lähdeviitteiden
tekemistä \paketti{natbib}\-/paketin toimintojen avulla. Paketti
sisältää muitakin ominaisuuksia, joihin kannattaa tutustua paketin
ohjekirjan avulla. On muun muassa mahdollista tehdä lähdeteoksista
tietokanta Bibtex\-/järjestelmän avulla. Jos kuitenkin siihen suuntaan
haluaa edetä, ei kannata käyttää \paketti{natbib}\-/pakettia eikä
Bibtexiä vaan monipuolisempaa pakettia \paketti{biblatex}, jota
käsitellään seuraavassa alaluvussa.

\subsection{Vaativaan käyttöön (biblatex)}
\label{luku:biblatex}

Suurten lähde- ja kirjallisuusluetteloiden ylläpito voi olla aika
työlästä: pitää jatkuvasti varmistaa, että kaikki viitatut teokset ovat
luettelossa ja että luettelo on pilkulleen yhdenmukainen. Makropaketti
\paketti{biblatex}\avctan{biblatex} on vastaus sellaisiin tarpeisiin.

Ajatuksena on, että kaikki tiedonlähteet ja kirjallisuus kirjoitetaan
tietokantaan, josta \paketti{biblatex}\-/paketin komennot hakevat tiedot
automaattisesti. Kirjoittaja tai työryhmä voi ylläpitää yhtä
kirjallisuustietokantaa, joka voi olla saatavilla oman laitoksen
verkkopalvelimella tai julkisella verkkosivullakin. Dokumentin tekstissä
viitataan teoksiin yksilöllisen tunnisteen avulla, ja pelkän viittauksen
perusteella oikeat teokset ilmestyvät lähdeluetteloon automaattisesti
aakkosjärjestyksessä ja yhdenmukaisessa muodossa. Yhtään tiedonlähdettä
ei tarvitse kirjoittaa lopulliseen lähdeluetteloon käsin.

\paketti{biblatex}\-/paketin käyttö vaatii hieman opettelua -- varsinkin
jos on tarve muokata lähdeluettelon ja lähdeviittausten ulkoasua.
Muutaman tiedonlähteen ylläpito on todennäköisesti paljon helpompaa ja
nopeampaa niillä keinoilla, jotka on kuvattu luvussa \ref{luku:natbib}
(\paketti{natbib}). Sen sijaan laajoja tieteellisiä artikkeleita
kirjoittaville \paketti{biblatex} voi olla suuri apu, koska
artikkeleissa on yleensä paljon lähteitä ja useissakin artikkeleissa
viitataan yleensä samoihin lähteisiin.

\subsubsection{Teostietokanta}

Lähdeteosten tietokanta on erillinen tekstitiedosto, joka tavallisesti
nimetään \koodi{bib}\-/päätteiseksi, esimerkiksi \koodi{teokset.bib}.
Tiedosto koostuu \koodi{@}\=/merkillä ja teostyypin nimellä alkavista
tietueista, joiden yleinen muoto on seuraavanlainen:

\begin{koodilohkosis}
  @teostyyppi{tunniste,
    author = {...},
    title = "..."
  }
\end{koodilohkosis}

Teostyypin nimen jälkeen aaltosulkeiden sisään kirjoitetaan teoksen
kaikki tiedot. Ne alkavat teoksen yksilöllisellä tunnisteella, jota
käytetään lähdeviittauksissa. Tunnisteen jälkeen tulevat muut kentät.
Eri kentät kuten \koodi{author} ja \koodi{title} erotetaan toisistaan
pilkulla. Kentän nimi ja sen sisältö erotetaan toisistaan
yhtäsuuruusmerkillä (\koodi{=}), ja kentän sisältö kirjoitetaan
aaltosulkeiden tai lainausmerkkien sisään, kuten edellinen esimerkki
näyttää.

\begin{esimerkki*}
\begin{koodilohko}
  @book{itkonen_typogr,
    author = {Itkonen, Markus},
    title = {Typografian käsikirja},
    date = {2019},
    edition = {5},
    publisher = {Typoteekki. Graafinen suunnittelu Markus Itkonen Oy}
  }

  @incollection{likonen_teams,
    author = {Likonen, Teemu and Riskilä, Kaisa},
    title = {Verkkoyhteistyö Teams-ympäristössä},
    editor = {Tammi, Tuomo and Horila, Mikko},
    booktitle = {Oppimis- ja toimintaympäristöjen kehittäminen
      harjoittelukouluissa II},
    booksubtitle = {Tilat ja tekniikka pedagogisen kehittämisen tukena},
    publisher = {E-norssi. Opettajankouluttajien yhteistyöverkosto},
    date = {2020},
    pages = {85-92},
    url = {http://www.enorssi.fi/oppimisymparistojulkaisu2020/}
  }

  @article{likonen_tietokanta,
    author = {Likonen, Teemu},
    title = {Tietoa kantaan ja takaisin},
    journaltitle = {Skrolli},
    journalsubtitle = {Tietokonekulttuurin erikoislehti},
    date = {2015},
    volume = {2015},
    number = {4},
    pages = {52-55},
    url = {https://skrolli.fi/numerot/2015-4/}
  }

  @online{ctan,
    title = {Comprehensive TeX Archive Network},
    shorttitle = {CTAN},
    date = {1992/},
    url = {https://www.ctan.org/}
  }
\end{koodilohko}
\caption{Lähdeteosten tietokantatiedosto}
\label{esim:bib-tiedosto}
\end{esimerkki*}

Todellista käyttöä vastaava tietokanta tai sen osa on esimerkissä
\ref{esim:bib-tiedosto}, jossa on neljä erityyppistä teostietuetta:
\koodi{book}, \koodi{incollection}, \koodi{article} ja \koodi{online}.
Ensin mainittu%
\koodimargin{book} teostyyppi \koodi{book} sopii tavallisille kirjoille,
joissa tietyt tekijät (\koodi{author}) vastaavat suunnilleen koko
teoksen sisällöstä ja teoksella on jokin julkaisijataho
(\koodi{publisher}).

Teostyyppi%
\koodimargin{incollection} \koodi{incollection} tarkoittaa esimerkiksi
artikkelikokoelmaa, jonka yksittäiseen artikkeliin (\koodi{title}) ja
sen kirjoittajaan (\koodi{author}) on tarkoitus viitata. Voidaan mainita
myös artikkelin alku- ja lop\-pu\-si\-vut (\koodi{pages}). Kokoelmalla
on toimittaja (\koodi{editor}) ja yhteinen nimi (\koodi{book\-title}).

Tyyppi%
\koodimargin{article} \koodi{article} sopii säännöllisesti julkaistavan
aikakaus- tai muun lehden artikkeleihin. Viittauskohteena on yksittäinen
artikkeli ja sen kirjoittaja. Julkaisutiedoissa mainitaan lehden nimi
(\koodi{jour\-nal\-title}), julkaisukausi (\koodi{vol\-ume}), kauteen
kuuluvan julkaisun järjestysnumero (\koodi{num\-ber}) sekä mahdollisesti
artikkelin sivut (\koodi{pages}).

Verkkolähteiden%
\koodimargin{online} merkitsemiseen sopii \koodi{on\-line}\-/teostyyppi,
joissa on ta\-van\-omais\-ten kenttien lisäksi ainakin verkko\-/osoite
eli \koodi{url}\-/kenttä ja mahdollisesti viittauspäivä
(\koodi{url\-date}) osoittamassa, milloin viitatut tiedot olivat
saatavilla.

Teostyyppejä ja teoksiin liittyviä tietokenttiä on olemassa paljon
muitakin. Niiden merkitystä ja käyttöä neuvotaan tarkemmin
\paketti{biblatex}\-/paketin ohjeissa. Seuraavassa on kuitenkin pari
huomiota tietokannan ja kenttien kieli\-opillisista asioista.

Tietueissa joidenkin kenttien sisältö voi koostua useasta osasta kuten
saman teoksen eri tekijöistä. Eri tekijöiden nimet erotetaan
\koodi{author}- ja \koodi{editor}\-/kentissä toisistaan
\koodi{and}\-/sanalla. Oletuksena \paketti{biblatex} katsoo, että
tekijät ovat henkilöitä, ja käsittelee esimerkiksi etu- ja sukunimet
tietyllä tavalla: jos mukana on pilkku, sitä ennen on sukunimi, ja
etunimet tulevat pilkun jälkeen; jos pilkkua ei ole, etunimet ovat
ensin, ja sukunimi on lopussa.

Jos kuitenkin teoksen tekijänä on yritys tai yhteisö, täytyy sen nimi
kirjoittaa kokonaan aaltosulkeisiin, jottei sitä tulkittaisi
henkilönnimeksi. Tällaisten aaltosulkeiden sisällä voi käyttää
\koodi{and}\-/sanaa normaalisti, eikä sitä tulkita eri tekijöiden
erottimeksi. Seuraavassa on näistä esimerkit:

\begin{koodilohkosis}
  author = {Meikäläinen, Matti and Teikäläinen, Teija}
  author = {{Org. of Latex and Typography} and Meikäläinen, Matti}
\end{koodilohkosis}

Muunkinlaisia useasta osasta koostuvia kenttiä on olemassa.
Asiasanakentän (\koodi{keywords}) eri sanat erotetaan toisistaan
pilkulla, ja sivunumeroissa (\koodi{pages}) voi olla myös luku\-alueita,
jotka ilmaistaan yhdysmerkillä \mbox{(\koodi{-})}.

\begin{koodilohkosis}
  keywords = {eri, sanoja, peräkkäin}
  pages = {15-19}
\end{koodilohkosis}

Teostietokantaan voi määrittää vakiosisältöisiä muuttujia käyttämällä
\koodi{@string}\-/rakennetta. Vakioihin voi sitten viitata
teostietueiden kentistä esimerkin \ref{esim:bib-muuttujat} tavoin.
Vakiot ovat hyödyllisiä silloin, kun sama kentän sisältö toistuu useissa
teoksissa, kuten tässä esimerkissä sama tekijä (\koodi{author}) ja
aikakauslehden nimi (\koodi{jour\-nal\-title}). Vakioita voi yhdistää
saman kentän muuhun sisältöön käyttämällä \koodi{\#}\=/merkkiä, kuten
esimerkin rivillä 13 on tehty.

\begin{esimerkki*}
\begin{koodilohko}
  @string{
    oma = {Meikäläinen, Matti},
    lehti = {Hienon hieno aikakauslehti}
  }

  @article{hieno_artikkeli,
    author = oma,
    journaltitle = lehti,
    ...
  }

  @article{toinen_artikkeli,
    author = oma # { and Teikäläinen, Teija},
    journaltitle = lehti,
    ...
  }
\end{koodilohko}
\caption{Muuttujien käyttö ja \koodi{@string}\-/rakenne}
\label{esim:bib-muuttujat}
\end{esimerkki*}

\subsubsection{Käyttöönotto}

\paketti{biblatex}\-/makropaketti otetaan käyttöön esimerkin
\ref{esim:biblatex-käyttöönotto} rivien avulla. Mukana ovat myös paketit
\paketti{polyglossia} ja \paketti{cs\-quotes}. Jälkimmäinen sisältää
lainausmerkkien käyttöön liittyvää logiikkaa (luku
\ref{luku:lainausmerkit}), jota ilman \paketti{biblatex} ei saa eri
kielten erilaisia lainausmerkkejä oikein vaan käyttää pelkästään
amerikkalaisia (``~'').

\begin{esimerkki*}
\begin{koodilohko}
  % Polyglossia tai babel on ladattava ennen biblatexia.
  \usepackage{polyglossia}

  % Kielikohtaiset lainausmerkit oikein csquoten avulla.
  \usepackage{csquotes}

  \usepackage[style=authoryear]{biblatex}
\end{koodilohko}
\caption{\paketti{biblatex}\-/makropaketin käyttöönotto ja asetuksia}
\label{esim:biblatex-käyttöönotto}
\end{esimerkki*}

Paketin asetuksissa käytetään valitsinta \koodi{style} ja sen asetusta
\koodi{author\-year}, joka asettaa lähdeviittausten ja lähdeluettelon
tyyliksi tekijän ja vuosiluvun. Se on yleinen käytäntö suomenkielisissä
teksteissä. Vastaavia tyylejä ovat myös \koodi{author\-year-comp},
\koodi{author\-year-ibid} ja \koodi{author\-year-icomp}, jotka lisäksi
tiivistävät peräkkäisiä lähdeviittauksia, jos teoksen tekijä on sama.

Numerointiin tai kirjainlyhenteisiin perustuvat lähdeluettelo\-/{} ja
viittaustyylit ovat nimeltään \koodi{nu\-mer\-ic} ja
\koodi{al\-pha\-bet\-ic}. Muitakin tyylejä on olemassa, mutta tämän
oppaan esimerkeissä käsitellään tekijä--vuosi-tyyliä.

Makropaketin omien lähdeluettelo\-/{} ja viittaustyylien lisäksi
Latex\-/jakelupaketissa on todennäköisesti mukana myös ulkopuolisten
tahojen tekemiä tyylejä. Tyylikokonaisuus nimeltä
\paketti{bib\-latex-ext}\avctan{biblatex-ext} laajentaa
\paketti{biblatex}\-/paketin tavallisten tyylien ominaisuuksia.
Laajennettujen tyylien käyttäminen ei vaadi erillisen makropaketin
lataamista, vaan tyylin saa käyttöön yksinkertaisesti vain
kirjoittamalla sen nimen \paketti{biblatex}\-/paketin lataamisen
yhteydessä. Laajennetut tyylit alkavat kirjaimilla \mbox{\koodi{ext-},}
esimerkiksi \koodi{ext-author\-year} tai \koodi{ext-author\-year-comp}.

Esimerkin \ref{esim:biblatex-käyttöönotto} komentojen lisäksi täytyy
komennolla \koodi{\keno add\-bib\-re\-source} nimetä kaikki käyttöön
otettavat teostietokantatiedostot. Komentoja ja tiedostoja voi olla
useampiakin, ja tietokanta voi olla myös verkko\-/osoitteen takana oleva
tiedosto. \koodi{\keno add\-bib\-re\-source}\-/komennot täytyy
kirjoittaa Latex\-/dokumentin esittelyosaan.

\begin{koodilohkosis}
  \addbibresource{teokset.bib}
  \addbibresource{~/texmf/omat_kirjoitukset.bib}
  \addbibresource[location=remote]{http://osoite.netissä/yhteiset.bib}
\end{koodilohkosis}

Lähdeluettelo ladotaan dokumenttiin komennolla \koodi{\keno
  print\-bib\-li\-og\-ra\-phy}. Komennolle voi antaa valinnaisen
argumentin, jonka valitsimilla vaikutetaan esimerkiksi lähdeluettelon
otsikon tekstiin tai poistetaan automaattinen otsikointi kokonaan. On
myös olemassa erilaisia lähdeteosten rajaamisvalitsimia, joiden avulla
voi määrittää, mitä teoksia kyseiseen luetteloon halutaan. Näin voidaan
esimerkiksi rajata painetut lähteet yhteen luetteloon, julkaisemattomat
toiseen ja verkkolähteet kolmanteen.

\begin{koodilohkosis}
  \printbibliography
  \printbibliography[title={Lähteet}]
  \printbibliography[heading=none,  % Ei automaattista otsikkoa,
    type=online]           % ja rajataan vain online-tyyppisiin.
\end{koodilohkosis}

Lähdeluetteloon tulevat mukaan vain ne teokset, joihin on viitattu.
Mitään ei siis näy, jos ei ole lähdeviittauksia. Seuraavassa alaluvussa
käsitellään lähdeviittauskomentoja ja myös ''näkymätöntä''
viittauskomentoa, jolla teoksia saadaan mukaan luetteloon ilman näkyvää
viittausta.

\subsubsection{Lähdeviittaukset}

\providecommand{\rivi}{}
\renewcommand{\rivi}[2]{\koodi{\keno #1\{\ldots\}} & #2 \\}

\leijutlk{
  \begin{tabular}{ll}
    \toprule
    \ots{Komento} & \ots{Esimerkki} \\
    \midrule
    \rivi{cite}{Meikäläinen 2020}
    \rivi{textcite}{Meikäläinen (2020)}
    \rivi{parencite}{(Meikäläinen 2020)}
    \rivi{citeauthor}{Meikäläinen}
    \rivi{citeyear}{2020}
    \rivi{citetitle}{[teoksen nimi]}
    \rivi{footcite}{Meikäläinen 2020 [alaviitteessä]}
    \rivi{nocite}{[näkymätön viittaus]}
    \bottomrule
  \end{tabular}
}{
  \caption{\paketti{biblatex}\-/paketin lähdeviittauskomentoja}
  \label{tlk:biblatex-cite}
}

Taulukkoon \ref{tlk:biblatex-cite} on koottu tavallisimpia
\paketti{biblatex}\-/paketin viittauskomentoja. Komennoille voi antaa
valinnaisen argumentin, jolla kerrotaan täsmentävää tietoa
lähdeviittauksesta. Yleensä se on viitattavan teoksen sivunumero.
Viittaus näkyy dokumentissa esimerkiksi seuraavalla tavalla:

% \pagebreak[3]

\begin{koodilohkosis}
  \textcite[27--29]{johdatus} % Viittaus teokseen ”johdatus”.
\end{koodilohkosis}

\begin{tulossis}
  Meikäläinen ja Teikäläinen (2020, s. 27--29)
\end{tulossis}

Jos halutaan sisällyttää lähdeluetteloon teoksia, joihin ei ole
välttämättä viitattu, käytetään dokumentissa kerran ''näkymätöntä''
viittauskomentoa \koodi{\keno no\-cite}. Sille annetaan argumentiksi
tunnisteet niistä teoksista, jotka halutaan mukaan luetteloon.
Argumentti~\koodi{*} (tähti) valitsee kaikki teokset.

\begin{koodilohkosis}
  \nocite{meikäläinen, teikäläinen} % Nämä teokset mukaan.
  \nocite{*}                        % Kaikki mukaan.
\end{koodilohkosis}

\subsubsection{Lähdetiedostojen kääntäminen}

Latexin kääntäjä\-ohjelmat Lualatex tai Xelatex eivät yksinään riitä,
sillä teostietokanta ei ole tavallinen Latex\-/muotoinen tiedosto.
Tarvitaan myös Latex\-/jakelun mukana tulevaa komentoa \koodi{bib\-er},
joka käsittelee teostietokantaan liittyviä tiedostoja. Lopulta
Latex\-/kääntäjääkin täytyy kutsua kaksi kolme kertaa, jotta kaikki
ristiviitteet saadaan kuntoon. Komentojen suoritusjärjestys on
seuraavanlainen:

\begin{koodilohkosis}
  lualatex teksti.tex
  biber teksti.bcf
  lualatex teksti.tex
  lualatex teksti.tex
\end{koodilohkosis}

Edellisen esimerkin komennoissa voi tiedoston nimistä jättää päätteet
pois (\koodi{.tex}, \koodi{.bcf}). \koodi{lualatex}\-/ohjelman paikalla
voi olla myös \koodi{xelatex}. Kääntäminen on vielä helpompaa, kun
käyttää \koodi{latexmk}\-/ohjelmaa (luku \ref{luku:latexmk}), joka osaa
automaattisesti suorittaa myös \koodi{bib\-er}\-/ohjelman ja tarvittavat
uudelleen kääntämiset. Yksi komento riittää käyttäjälle:

\begin{koodilohkosis}
  latexmk -lualatex teksti.tex    % tai: -xelatex
\end{koodilohkosis}

\subsubsection{Lähdeluettelon mittoja}

Lähdeluettelon ulkoasuun voi vaikuttaa muutaman eri mitan avulla, joista
esitellään tässä yhteydessä vain osa. Lähdemerkinnän riippuvan
sisennyksen suuruus määräytyy mitan \koodi{\keno bibhang} avulla.
Yleensä lienee sopivaa asettaa se samaksi kuin tekstikappaleiden
ensimmäisen rivin sisennys \koodi{\keno parindent}.

\begin{koodilohkosis}
  \setlength{\parindent}{1.1em} % tekstikappaleiden 1. rivin sisennys
  \setlength{\bibhang}{\parindent}
\end{koodilohkosis}

Mitta \koodi{\keno bib\-item\-sep} on lähdemerkintöjen välinen
pystysuuntainen tila. Sen avulla voi harventaa lähdeluetteloa, jolloin
lähdemerkinnät erottuvat paremmin toisistaan. Mitan \koodi{\keno
  bib\-name\-sep} avulla voi tehdä suuremman pystysuuntaisen välin
lähdemerkintöjen väliin silloin, kun teoksen tekijä vaihtuu
(\koodi{author} tai \koodi{editor}). Toisin sanoen tämän mitan avulla
voi ryhmitellä saman tekijän teokset tiiviimmin yhteen ja jättää väliä
seuraavan tekijän teoksiin. Vastaavanlainen mitta on \koodi{\keno
  bib\-init\-sep}, jota käytetään silloin, kun lähdemerkinnän aloittava
kirjain vaihtuu. Tämän avulla voi ryhmitellä lähdemerkinnät aakkosittain
eli tehdä suuremman välin aina lähdemerkinnän alkukirjaimen vaihtuessa.

\begin{koodilohkosis}
  \setlength{\bibitemsep}{.5ex plus .1ex minus .1ex}
  \setlength{\bibnamesep}{1em  plus .2ex minus .1ex}
  \setlength{\bibinitsep}{2em  plus .2ex minus .1ex}
\end{koodilohkosis}

\subsubsection{Muita asetuksia}

Lähdemerkintöjen fonttiin voi vaikuttaa määrittelemällä uudelleen
komennon \koodi{\keno bibfont} ja sijoittamalla halutut fontti- tai muut
komennot kyseisen komennon määritelmään.

\begin{koodilohkosis}
  \renewcommand{\bibfont}{\sffamily\small}
\end{koodilohkosis}

Lähdemerkinnät itsessään muodostetaan automaattisesti tiettyjen
tyyli\-ase\-tus\-ten perusteella. Omiakin tyylejä voi tehdä, mutta
yleensä riittää vain yksittäisen asetusten muuttaminen. Niistä
käsitellään tässä yhteydessä muutama. Asetusten muuttamiseen tarvitaan
yleensä \paketti{biblatex}\-/paketin omia asetuskomentoja.

Lähdeluettelon nimet näkyvät oletusasetuksilla siten, että teoksen
ensimmäisen tekijän sukunimi mainitaan ensin (luettelon
aakkosjärjestyksen vuoksi) mutta saman teoksen muiden tekijöiden etunimi
mainitaan ensin. Tekijöiden nimet näkyvät siis seuraavalla tavalla:
''Meikäläinen, Matti ja Teija Teikäläinen''. Suomessa on kuitenkin
tapana kirjoittaa kaikki nimet samalla tavalla ja mainita sukunimi aina
ensin. Tämä saadaan toteutettua seuraavilla komennolla:

% \pagebreak[3]

\begin{koodilohkosis}
  \DeclareNameAlias{default} {family-given}
  \DeclareNameAlias{sortname}{family-given}
\end{koodilohkosis}

\begin{tulossis}
  Meikäläinen, Matti ja Teikäläinen, Teija (2020). --~--
\end{tulossis}

Saman teoksen eri tekijöiden nimet erotetaan oletuksena toisistaan
pilkuilla paitsi kahden viimeisen nimen välissä on ja-sana. Usein on
kuitenkin tapana käyttää \&\=/merkkiä ainakin lähdeluettelossa.
Seuraavat esimerkkikomennot asettavat lähdeluettelon kaikkien nimien
erottimeksi \&\=/merkin.

% \pagebreak[3]

\begin{koodilohkosis}
  \DeclareDelimFormat[bib]{multinamedelim}{\space\&\space}
  \DeclareDelimFormat[bib]{finalnamedelim}{\space\&\space}
\end{koodilohkosis}

\begin{tulossis}
  Meikäläinen, Matti \& Teikäläinen, Teija \& Tutkija, Tuija (2020).
  --~--
\end{tulossis}

Edellisten esimerkkikomentojen valinnainen argumentti \koodi{bib}
tarkoittaa, että vaikutetaan vain lähdeluetteloon. Argumentti voi olla
myös \mbox{\koodi{cite}}, jolloin vaikutetaan lähdeviittauksiin.
Ero\-tin\-merkki\-ase\-tuk\-sen nimi \koodi{multi\-name\-delim}
tarkoittaa muiden kuin kahden viimeisen tekijän nimen välissä olevaa
erotinta. Kahden viimeisen nimen erotin määritellään asetuksella
\koodi{final\-name\-delim}.

Useiden saman teoksen tekijöiden luettelot lyhennetään automaattisesti
esimerkiksi muotoon ''Meikäläinen et~al.'', ja lyhentämisen säännöt
määritellään tiettyjen \koodi{max}- ja \koodi{min}\-/alkuisten paketin
valitsimien avulla. Lähdeluettelossa teoksen tekijäluetteloon
vaikutetaan valitsimilla \koodi{max\-bib\-names} ja
\koodi{min\-bib\-names}, kun taas lähdeviittausten tekijäluetteloon
vaikutetaan valitsimilla \koodi{max\-cite\-names} ja
\koodi{min\-cite\-names}. Asetukset toimivat siten, että jos
enimmäismäärä (max) ylittyy, typistetään tekijäluettelo vähimmäismäärään
(min) ja lisätään ilmaus ''et al.'' tms.

Tekijäluetteloa ei kuitenkaan välttämättä lyhennetä, jos luettelosta
tulisi täsmälleen samanlainen kuin jollakin toisella teoksella. Tähän
asiaan puolestaan vaikutetaan valitsimella \koodi{unique\-list}, joka on
oletuksena päällä viittaustyylissä \koodi{author\-year}.

\begin{koodilohkosis}
  \usepackage[style=authoryear, maxbibnames=99, minbibnames=3,
    maxcitenames=3, mincitenames=1, uniquelist=true]{biblatex}
\end{koodilohkosis}

Kun halutaan näyttää lähdeluettelossa vain tekijän etunimen alkukirjain
eikä koko etunimeä, käytetään paketin valitsinta \koodi{given\-inits}.

% \pagebreak[3]

\begin{koodilohkosis}
  \usepackage[…, giveninits]{biblatex}
\end{koodilohkosis}

\begin{tulossis}
  Meikäläinen, M. (2020). -- --
\end{tulossis}

Lähdeluettelossa näytetään teoksen tekijän nimen kohdalla ajatusviiva,
jos tekijä on sama kuin luettelon edelliselläkin teoksella. Mikäli tätä
(sinänsä yleistä) käytäntöä ei haluta, täytyy käyttää paketin asetusta
\koodi{dash\-ed=\katk false}.

\begin{koodilohkosis}
  \usepackage[…, dashed=false]{biblatex}
\end{koodilohkosis}

Joskus on tapana latoa lähdeluettelossa tekijöiden nimet esimerkiksi
pienversaalilla, jotta ne erottuvat luettelosta paremmin. Tällainen
muutos vaatii, että lähdeluettelon tulostamisen yhteydessä määritellään
uudelleen henkilön nimiin liittyvät tulostuskomennot \koodi{\keno
  mk\-bib\-name\-fam\-i\-ly}, \koodi{\keno mk\-bib\-name\-giv\-en},
\koodi{\keno mk\-bib\-name\-pre\-fix} ja \koodi{\keno
  mk\-bib\-name\-suf\-fix}. Se saadaan automaattiseksi seuraavilla
komennoilla:

% \pagebreak[3]

\begin{koodilohkosis}
  \AtBeginBibliography{%
    \renewcommand{\mkbibnamefamily}[1]{\textsc{#1}}
    \renewcommand{\mkbibnamegiven} [1]{\textsc{#1}}
    \renewcommand{\mkbibnameprefix}[1]{\textsc{#1}}
    \renewcommand{\mkbibnamesuffix}[1]{\textsc{#1}}
  }
\end{koodilohkosis}

\begin{tulossis}
  \textsc{Meikäläinen}, \textsc{Matti} \& \textsc{Teikäläinen},
  \textsc{Teija} (2020). -- --
\end{tulossis}

Lähdeluettelon eri osien erottimena on yleensä piste. Joskus kuitenkin
tekijöiden nimien ja vuosiluvun jälkeen on kaksoispiste. Se saadaan
toteutettua seuraavalla komennolla:

% \pagebreak[3]

\begin{koodilohkosis}
  \DeclareDelimFormat[bib]{nametitledelim}{\addcolon\space}
\end{koodilohkosis}

\begin{tulossis}
  Meikäläinen, Matti (2020): -- --
\end{tulossis}

Oletuksena \paketti{biblatex} kursivoi \koodi{book}\-/tyyppisten teosten
nimen (\koodi{title}). Sen sijaan artikkelikokoelmissa
(\koodi{incollection}) ja aikakauslehdissä (\koodi{article})
kursivoidaan julkaistun kokoelman nimi (\koodi{book\-title}) ja
aikakauslehden nimi (\koodi{jour\-nal\-title}). Näissä teostyypeissä
viitatun artikkelin nimi (\koodi{title}) kirjoitetaan lainausmerkkeihin.
Käytäntö tuntuu järkevältä, sillä kursivoituna on aina julkaistu
kokonainen teos eikä sen osa. Käytännössähän tiedonlähde joudutaan
hakemaan teoksen nimen perusteella. Joku voi silti haluta muuttaa näiden
ulkoasua ja esimerkiksi kursivoida aina viittauksen kohteena olevan
artikkelin. Seuraavassa on esimerkkikomennot edellä mainittujen
lähdeluettelon kenttien muuttamiseen.

\begin{koodilohkosis}
  \DeclareFieldFormat[article,incollection]{title}{\textit{#1}}
  \DeclareFieldFormat[article]{journaltitle}{#1}
  \DeclareFieldFormat[incollection]{booktitle}{#1}
\end{koodilohkosis}

Edellä olevissa esimerkkikomennoissa on valinnaisena argumenttina ne
teostyypit, joihin halutaan vaikuttaa. Jos valinnaisen argumentin jättää
pois, vaikutetaan kaikkiin teostyyppeihin, ellei tarkempaa
teostyyppikohtaista määritelmää ole olemassa. Ensimmäinen pakollinen
argumentti on kentän nimi teostietokannassa, ja toinen pakollinen
argumentti on sisältö, joka ladotaan lähdemerkintään kyseisen tiedon
kohdalle. Teostietokannasta tulevan kentän sisältö on parametrissa
\koodi{\#1}.

Mikäli haluaa jonkin teoksen tiedon lainausmerkkeihin tai sulkeisiin,
kannattaa käyttää komentoa \koodi{\keno mk\-bib\-quote} tai \koodi{\keno
  mk\-bib\-parens}. Ne ymmärtävät ottaa huomioon eri kielten
lainausmerkkikäytännöt ja mahdolliset sisäkkäiset sulkeet.

\begin{koodilohkosis}
  \DeclareFieldFormat[incollection]{booktitle}{\mkbibquote{#1}}
\end{koodilohkosis}

Oletuksena teoksen vuosiluku tai muu päiväys ladotaan lähdeluetteloon
sulkeissa. Joissakin lähdeluettelokäytännöissä sulkeita ei kuitenkin
ole, joten seuraavaksi käsitellään keino sulkeiden poistamiseen.
Tavallisessa \paketti{biblatex}\-/paketin lähdeluettelotyylissä
\koodi{author\-year} ei ole omaa asetusta teoksen päiväyksen ulkoasun
muuttamiseen, mutta jos käyttää tyyliä \koodi{ext-author\-year} (tms.),
sekin puute korjaantuu, ja voi käyttää
\koodi{bib\-label\-date}\-/asetusta.

% \pagebreak[3]

\begin{koodilohkosis}
  \usepackage[style=ext-authoryear]{biblatex}

  \DeclareFieldFormat{biblabeldate}{#1}
\end{koodilohkosis}

\begin{tulossis}
  Meikäläinen, Matti 2020. -- --
\end{tulossis}

Artikkelikokoelmissa (teostyyppi \koodi{incollection}) mainitaan
oletuksena kokoelman nimi ja toimittajat seuraavassa muodossa:
''Teoksessa: \textit{Hieno artikkelikokoelma.} Toim. Kirjailija,
Kaisa''. Ensin siis mainitaan julkaisun nimi ja sen jälkeen toimittajien
nimet. Suomessa on tapana kirjoittaa nämä tiedot toisinpäin ja laittaa
toimittajarooli sulkeisiin. Tällaiset asetukset saa käyttämällä tyyliä
\koodi{ext-author\-year} (tms.), paketin asetusta
\koodi{in\-name\-before\-title=\katk true} ja seuraavia komentoja:

% \pagebreak[3]

\begin{koodilohkosis}
  \usepackage[style=ext-authoryear, innamebeforetitle=true]{biblatex}

  \DeclareFieldFormat{editortype}{\mkbibparens{#1}}
  \DeclareDelimFormat{editortypedelim}{\addspace}
\end{koodilohkosis}

\begin{tulossis}
  -- -- Teoksessa: Kirjailija, Kaisa (toim.). \textit{Hieno
    artikkelikokoelma}. -- --
\end{tulossis}

Lähdeviittauksissa vuosiluvun ja sivunumeroiden välissä käytetään
välillä pilkkua ja välillä kaksoispistettä. Sivunumeroiden yhteydessä
voi olla lyhenne ''s.'' tai se voidaan jättää pois. Seuraavilla
komennoilla vaikutetaan näihin asetuksiin:

% \pagebreak[3]

\begin{koodilohkosis}
  \DeclareFieldFormat{postnote}{#1} % Lyhenne ”s.” pois.
  \DeclareDelimFormat{postnotedelim}{\addcolon\space} % Kaksoispiste.

  \textcite[15--16]{tunniste} toteaa artikkelissaan -- --
\end{koodilohkosis}

\begin{tulossis}
  Meikäläinen (2020: 15--16) toteaa artikkelissaan -- --
\end{tulossis}

Kun saman teoksen usean tekijän luettelo lyhennetään, käytetään
oletuksena latinankielistä ilmausta pois jäävien nimien tilalla:
''Meikäläinen et al.''. Ilmauksen voi muuttaa suomenkieliseksi
seuraavalla komennolla:

% \pagebreak[3]

\begin{koodilohkosis}
  \DefineBibliographyStrings{finnish}{
    andothers = {ym.},
  }
\end{koodilohkosis}

\begin{tulossis}
  Meikäläinen ym. (2020)
\end{tulossis}

\paketti{biblatex}\-/paketti sisältää valtavan paljon asetuksia ja
mahdollisuuksia lähdeluettelon ja \=/viitteiden ulkoasun säätämiseen.
Esimerkiksi komennolla \koodi{\keno
  De\-clare\-Bib\-li\-og\-ra\-phy\-Driv\-er} voi ottaa täysin haltuun,
miten tietty teostyyppi ladotaan lähdeluetteloon. Komennolla
\koodi{\keno De\-clare\-Sort\-ing\-Tem\-plate} voi määritellä omia
aakkostustapoja. Lisätietoa saa paketin ohjekirjasta.%
\avctan{biblatex}

\section{Kuvat ja värit}
\label{luku:grafiikka}

...

\section{Laatikot}
\label{luku:laatikot}

...

\section{Päällekkäinen teksti}

% textpos-paketti

...

\section{Diaesitykset}
\label{luku:diaesitykset}

...

\section{Kirjeet}
\label{luku:kirjeet}

...
